import{_ as mt}from"./index.7dcf2984.js";import{ah as M,o as at,c as ft,V as F,P as H,a as lt,T as yt,U as gt,O as bt,S as Dt,F as Vt,a8 as Lt,ar as Yt,a9 as Xt,Q as Jt}from"./vendor-vue.9e61e0af.js";import{F as Ct,c as jt}from"./vendor-lib.76301fc3.js";import{H as Rt}from"./highlight-lib.3654f6d3.js";import{C as $t}from"./ConnectStatus.e42d3ed2.js";import{h as Qt}from"./highlight-util.a4f1867f.js";import{c as Bt}from"./element-plus.30eb1cab.js";import{E as te}from"./ExpireProgress.52f97519.js";import"./element-icon.1ce1c350.js";const ee={domains:[{message:"\u57DF\u540D\u5217\u8868\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],status:[{message:"\u9A8C\u8BC1\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],start_time:[{message:"SSL\u7B7E\u53D1\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],expire_time:[{message:"SSL\u8FC7\u671F\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],create_time_label:[{message:"\u521B\u5EFA\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}]},re={name:"",props:{row:{type:Object,default:null}},components:{},data(){return{rules:ee,form:{domains:"",status:"",start_time:"",expire_time:"",create_time_label:""}}},computed:{},methods:{async getData(){if(this.row){let x={id:this.row.id};const k=await this.$http.function(x);if(k.code!=0)return;let n=k.data;this.form.domains=n.domains,this.form.status=n.status,this.form.start_time=n.start_time,this.form.expire_time=n.expire_time,this.form.create_time_label=n.create_time_label}},handleCancel(){this.$emit("on-cancel")},handleSubmit(){this.$refs.form.validate(x=>{if(x)this.confirmSubmit();else return!1})},async confirmSubmit(){let x=this.$loading({fullscreen:!0}),k={domains:this.form.domains.split(`
`)};this.row&&(k.id=this.row.id);const n=await this.$http.issueCertificate(k);n.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success",n.data)):this.$msg.error(n.msg),this.$nextTick(()=>{x.close()})}},created(){this.getData()}},ie={class:"text-center"};function ne(x,k,n,E,d,i){const a=M("el-input"),r=M("el-form-item"),l=M("el-form"),m=M("el-button");return at(),ft("div",null,[F(l,{ref:"form",model:d.form,rules:d.rules,"label-width":"100px"},{default:H(()=>[F(r,{label:"id",prop:"id",style:{display:"none"}},{default:H(()=>[F(a,{type:"text",modelValue:d.form.id,"onUpdate:modelValue":k[0]||(k[0]=y=>d.form.id=y),placeholder:"id"},null,8,["modelValue"])]),_:1}),F(r,{label:"\u57DF\u540D\u5217\u8868",prop:"domains"},{default:H(()=>[F(a,{type:"textarea",modelValue:d.form.domains,"onUpdate:modelValue":k[1]||(k[1]=y=>d.form.domains=y),rows:5,placeholder:"\u8BF7\u8F93\u5165\u57DF\u540D\u5217\u8868\uFF0C\u6BCF\u884C\u4E00\u4E2A"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),lt("div",ie,[F(m,{onClick:i.handleCancel},{default:H(()=>[yt("\u53D6 \u6D88")]),_:1},8,["onClick"]),F(m,{type:"primary",onClick:i.handleSubmit},{default:H(()=>[yt("\u786E \u5B9A")]),_:1},8,["onClick"])])])}const Zt=mt(re,[["render",ne]]),se={name:"",components:{ConnectStatus:$t},props:{list:{type:Array}},emits:["on-success"],computed:{},data(){return{currentRow:null,dialogVisible:!1}},methods:{handleEditRow(x){this.currentRow=x,this.dialogVisible=!0},async handleDeleteClick(x){let k={id:x.id};const n=await this.$http.function(k);n.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(n.msg)},async handleStatusChange(x){let k={id:x.id};const n=await this.$http.function(k);n.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(n.msg)},handleUpdateSuccess(){this.$emit("on-success")},downloadVerifyFile(x){let k=new Blob([x.validation],{type:"application/octet-stream;charset=utf-8"});Ct.saveAs(k,x.token)},handleCopyClick(x){jt(x),this.$msg.success("\u5DF2\u590D\u5236\u5230\u526A\u5207\u677F")},async handleVerifyDomainById(x){let k=this.$loading({fullscreen:!0}),n={domain_verify_id:x.id};const E=await this.$http.verifyCertificateById(n);E.code==0?(this.$msg.success("\u9A8C\u8BC1\u6210\u529F"),this.$emit("on-success",E.data)):this.$msg.error(E.msg),this.$nextTick(()=>{k.close()})}},created(){}},ae={style:{"margin-left":"4px"}},oe=["onClick"],le=["onClick"];function ce(x,k,n,E,d,i){const a=M("el-table-column"),r=M("ConnectStatus"),l=M("el-table");return at(),ft("div",null,[F(l,{data:n.list,stripe:"",border:""},{default:H(()=>[F(a,{label:"\u57DF\u540D","header-align":"center",align:"center",prop:"domain",width:"230"},{default:H(m=>[lt("span",null,gt(m.row.domain),1)]),_:1}),F(a,{label:"\u9A8C\u8BC1\u72B6\u6001","header-align":"center",align:"center",prop:"status",width:"100"},{default:H(m=>[F(r,{value:m.row.status_value},null,8,["value"]),lt("span",ae,gt(m.row.status||"-"),1)]),_:1}),F(a,{label:"TXT\u8BB0\u5F55","header-align":"center",align:"center",prop:"token"},{default:H(m=>[lt("div",{onClick:y=>i.handleCopyClick(m.row.token)},[lt("span",null,"_acme-challenge."+gt(m.row.domain),1)],8,oe)]),_:1}),F(a,{label:"\u8BB0\u5F55\u503C","header-align":"center",align:"center",prop:"token"},{default:H(m=>[lt("div",{onClick:y=>i.handleCopyClick(m.row.validation)},gt(m.row.validation||"-"),9,le)]),_:1})]),_:1},8,["data"])])}const de=mt(se,[["render",ce]]);const ue={name:"VerifyStep",props:{form:{type:Object},list:{type:Array}},emits:["on-success"],components:{VerifyStepDNSDataTable:de},data(){return{}},computed:{domain_list(){return this.form.domains.join(" ")},nginxConfig(){return`server {
  listen 80;
  server_name ${this.domain_list};

  location /.well-known/acme-challenge/ {
      alias /var/www/challenges/;
      try_files $uri =404;
  }
}`}},methods:{async getData(){},async handleSubmit(){let x=this.$loading({fullscreen:!0}),k={issue_certificate_id:this.form.id,challenge_type:"dns-01"};const n=await this.$http.verifyCertificateById(k);n.code==0?(this.$msg.success("\u9A8C\u8BC1\u6210\u529F"),this.$emit("on-success",n.data)):this.$msg.error(n.msg),this.$nextTick(()=>{x.close()})},downloadVerifyFile(){let x=new Blob([this.form.validation],{type:"application/octet-stream;charset=utf-8"});Ct.saveAs(x,this.form.token)}},mounted(){Rt.highlightAll()},created(){this.getData()}},he={class:"mo-form-detail"},fe={class:"text-center mt-md"};function pe(x,k,n,E,d,i){const a=M("VerifyStepDNSDataTable"),r=M("el-button");return at(),ft("div",he,[F(a,{form:n.form,list:n.list,"challenge-type":"dns-01"},null,8,["form","list"]),lt("div",fe,[F(r,{type:"primary",onClick:i.handleSubmit},{default:H(()=>[yt("\u9A8C \u8BC1")]),_:1},8,["onClick"])])])}const me=mt(ue,[["render",pe],["__scopeId","data-v-d9734d73"]]),_e={name:"",components:{ConnectStatus:$t},props:{list:{type:Array}},emits:["on-success"],computed:{},data(){return{currentRow:null,dialogVisible:!1}},methods:{handleEditRow(x){this.currentRow=x,this.dialogVisible=!0},async handleDeleteClick(x){let k={id:x.id};const n=await this.$http.function(k);n.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(n.msg)},async handleStatusChange(x){let k={id:x.id};const n=await this.$http.function(k);n.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(n.msg)},handleUpdateSuccess(){this.$emit("on-success")},downloadVerifyFile(x){let k=new Blob([x.validation],{type:"application/octet-stream;charset=utf-8"});Ct.saveAs(k,x.token)},handleCopyClick(x){jt(x),this.$msg.success("\u5DF2\u590D\u5236\u5230\u526A\u5207\u677F")},async handleVerifyDomainById(x){let k=this.$loading({fullscreen:!0}),n={domain_verify_id:x.id};const E=await this.$http.verifyCertificateById(n);E.code==0?(this.$msg.success("\u9A8C\u8BC1\u6210\u529F"),this.$emit("on-success",E.data)):this.$msg.error(E.msg),this.$nextTick(()=>{k.close()})}},created(){}},ge={style:{"margin-left":"4px"}},ye=["href"];function be(x,k,n,E,d,i){const a=M("el-table-column"),r=M("ConnectStatus"),l=M("Download"),m=M("el-icon"),y=M("el-link"),g=M("el-table");return at(),ft("div",null,[F(g,{data:n.list,stripe:"",border:""},{default:H(()=>[F(a,{label:"\u57DF\u540D","header-align":"center",align:"center",prop:"domain",width:"230","show-overflow-tooltip":""},{default:H(b=>[lt("span",null,gt(b.row.domain||"-"),1)]),_:1}),F(a,{label:"\u9A8C\u8BC1\u72B6\u6001","header-align":"center",align:"center",prop:"status",width:"100"},{default:H(b=>[F(r,{value:b.row.status_value},null,8,["value"]),lt("span",ge,gt(b.row.status||"-"),1)]),_:1}),F(a,{label:"\u9A8C\u8BC1URL","header-align":"center",align:"center",prop:"validation","show-overflow-tooltip":""},{default:H(b=>[lt("a",{href:b.row.verify_url,target:"_blank",class:"mo-link"},gt(b.row.verify_url),9,ye)]),_:1}),F(a,{label:"\u9A8C\u8BC1\u6587\u4EF6","header-align":"center",align:"center",prop:"validation",width:"80"},{default:H(b=>[F(y,{underline:!1,type:"primary",class:"mr-sm",onClick:o=>i.downloadVerifyFile(b.row)},{default:H(()=>[F(m,null,{default:H(()=>[F(l)]),_:1}),yt("\u4E0B\u8F7D")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])}const we=mt(_e,[["render",be]]),ve={host:[{message:"\u4E3B\u673A\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],user:[{message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],password:[{message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}]},ke={name:"",props:{row:{type:Object,default:null}},components:{},data(){return{rules:ve,form:{host:"",password:"",user:""}}},computed:{},methods:{async getData(){if(this.row)for(let x in this.form)this.form[x]=this.row[x]},async getHostById(x){let k={host_id:x};return(await this.$http.getHostById(k)).data},handleCancel(){this.$emit("on-cancel")},handleSubmit(){this.$refs.form.validate(x=>{if(x)this.confirmSubmit();else return!1})},async confirmSubmit(){let x=this.$loading({fullscreen:!0}),k={host:this.form.host,user:this.form.user,password:this.form.password},n=null,E=null;this.row&&this.row.id?(host_id=this.row.id,k.host_id=this.row.id,n=await this.$http.updateHostById(k),E={...this.row,...k}):(n=await this.$http.addHost(k),E=n.data),n.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success",E)):this.$msg.error(n.msg),this.$nextTick(()=>{x.close()})}},created(){this.getData()}},Se={class:"text-center"};function xe(x,k,n,E,d,i){const a=M("el-input"),r=M("el-form-item"),l=M("el-form"),m=M("el-button");return at(),ft("div",null,[F(l,{ref:"form",model:d.form,rules:d.rules,"label-width":"100px"},{default:H(()=>[F(r,{label:"\u4E3B\u673A\u5730\u5740",prop:"host"},{default:H(()=>[F(a,{type:"text",modelValue:d.form.host,"onUpdate:modelValue":k[0]||(k[0]=y=>d.form.host=y),placeholder:"\u4E3B\u673A\u5730\u5740"},null,8,["modelValue"])]),_:1}),F(r,{label:"\u7528\u6237\u540D",prop:"user"},{default:H(()=>[F(a,{type:"text",modelValue:d.form.user,"onUpdate:modelValue":k[1]||(k[1]=y=>d.form.user=y),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},null,8,["modelValue"])]),_:1}),F(r,{label:"\u5BC6\u7801",prop:"password"},{default:H(()=>[F(a,{type:"password",modelValue:d.form.password,"onUpdate:modelValue":k[2]||(k[2]=y=>d.form.password=y),"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),lt("div",Se,[F(m,{onClick:i.handleCancel},{default:H(()=>[yt("\u53D6 \u6D88")]),_:1},8,["onClick"]),F(m,{type:"primary",onClick:i.handleSubmit},{default:H(()=>[yt("\u786E \u5B9A")]),_:1},8,["onClick"])])])}const Ce=mt(ke,[["render",xe]]),De={name:"",props:{row:{type:Object,default:null},visible:{type:Boolean,default:!1}},emits:["update:visible"],components:{DataForm:Ce},data(){return{}},computed:{dialogTitle(){return this.row?"\u7F16\u8F91\u4E3B\u673A":"\u6DFB\u52A0\u4E3B\u673A"},dialogVisible:{get(){return this.visible},set(x){this.$emit("update:visible",x)}}},methods:{handleClose(){this.$emit("update:visible",!1)},handleOpen(){this.$emit("update:visible",!0)},handleSuccess(){this.handleClose(),this.$emit("on-success")}},created(){}};function ze(x,k,n,E,d,i){const a=M("DataForm"),r=M("el-dialog");return at(),bt(r,{title:i.dialogTitle,modelValue:i.dialogVisible,"onUpdate:modelValue":k[0]||(k[0]=l=>i.dialogVisible=l),width:"400px",center:"","append-to-body":""},{default:H(()=>[i.dialogVisible?(at(),bt(a,{key:0,row:n.row,onOnCancel:i.handleClose,onOnSuccess:i.handleSuccess},null,8,["row","onOnCancel","onOnSuccess"])):Dt("",!0)]),_:1},8,["title","modelValue"])}const Ae=mt(De,[["render",ze]]),Ee={name:"RemoteHost",props:{defaultKeyword:{type:String,default:""},modelValue:{type:Object,default:null}},emits:["on-confirm","update:modelValue"],components:{DataFormDialog:Ae},data(){return{visible:!1,keyword:"",list:[],editValue:null}},computed:{disabled(){return!(this.modelValue&&this.modelValue.id)},value:{get(){return this.modelValue},set(x){this.$emit("update:modelValue",x)}}},methods:{async getData(){this.defaultKeyword&&(this.keyword=this.defaultKeyword)},handleClose(){this.value=null},handleAddClick(){this.editValue={host:this.keyword},this.visible=!0},handleEditHost(){this.editValue=this.value,this.visible=!0},async handleSearch(x,k){let n={keyword:x};const E=await this.$http.getHostList(n);E.code==0?k(E.data.list.map(d=>(d.value=d.host,d))):this.$msg.error(E.msg)},handleSelect(x){console.log(x),this.value=x},handleDeployVerifyFile(){this.$emit("on-confirm",this.value)}},created(){this.getData()}},Oe={class:"flex flex-1 items-center"},Ie=lt("span",null,"\u6DFB\u52A0",-1);function Be(x,k,n,E,d,i){const a=M("el-tag"),r=M("el-autocomplete"),l=M("Plus"),m=M("el-icon"),y=M("el-link"),g=M("el-button"),b=M("DataFormDialog");return at(),ft("div",Oe,[i.value&&i.value.id?(at(),bt(a,{key:0,closable:"",onClose:i.handleClose,onClick:i.handleEditHost},{default:H(()=>[yt(gt(i.value.user)+"@"+gt(i.value.host),1)]),_:1},8,["onClose","onClick"])):(at(),ft(Vt,{key:1},[F(r,{modelValue:d.keyword,"onUpdate:modelValue":k[0]||(k[0]=o=>d.keyword=o),style:{width:"180px"},"fetch-suggestions":i.handleSearch,clearable:"",placeholder:"\u641C\u7D22\u4E3B\u673A",onSelect:i.handleSelect},null,8,["modelValue","fetch-suggestions","onSelect"]),F(y,{class:"ml-sm",underline:!1,type:"primary",onClick:i.handleAddClick},{default:H(()=>[F(m,null,{default:H(()=>[F(l)]),_:1}),Ie]),_:1},8,["onClick"])],64)),F(g,{class:"ml-md ml-auto",disabled:i.disabled,onClick:i.handleDeployVerifyFile},{default:H(()=>[yt("\u4E00\u952E\u90E8\u7F72")]),_:1},8,["disabled","onClick"]),F(b,{visible:d.visible,"onUpdate:visible":k[1]||(k[1]=o=>d.visible=o),row:d.editValue},null,8,["visible","row"])])}const Pt=mt(Ee,[["render",Be]]);const Fe={name:"CodeHighlight",props:{value:{type:String,default:""},language:{type:String,default:"nginx"}},components:{},data(){return{}},computed:{highlightValue(){return Rt.highlight(this.value,{language:this.language}).value}},methods:{async getData(){}},mounted(){Rt.highlightAll()},created(){this.getData()}},Re={class:"code-highlight"},Te=["innerHTML"];function Ve(x,k,n,E,d,i){return at(),ft("div",Re,[lt("pre",null,[lt("code",{innerHTML:i.highlightValue},null,8,Te)])])}const Wt=mt(Fe,[["render",Ve]]);const $e={name:"VerifyStep",props:{form:{type:Object},list:{type:Array}},emits:["on-success"],components:{VerifyStepFileDataTable:we,RemoteHost:Pt,CodeHighlight:Wt},data(){return{host:"",hasInit:!1,verifyDeployPath:"",deploy_host:null}},computed:{domain_list(){return this.form.domains.join(" ")},nginxConfig(){return`server {
  listen 80;
  server_name ${this.domain_list};

  location /.well-known/acme-challenge/ {
      alias ${this.verifyDeployPath};
      try_files $uri =404;
  }
}`}},methods:{async getData(){await this.getDomainHost(),this.hasInit=!0},async getDomainHost(){let x={domain:this.form.domains[0]};const k=await this.$http.getDomainHost(x);k.code==0?(this.host=k.data.host,this.host&&await this.getHost()):this.$msg.error(k.msg)},async getHost(){let x={keyword:this.host};const k=await this.$http.getHostList(x);k.data.list&&k.data.list.length>0&&(this.deploy_host=k.data.list[0])},async handleVerifyCertificateById(){let x=this.$loading({fullscreen:!0}),k={issue_certificate_id:this.form.id,challenge_type:"http-01"};const n=await this.$http.verifyCertificateById(k);n.code==0?(this.$msg.success("\u9A8C\u8BC1\u6210\u529F"),this.$emit("on-success",n.data)):this.$msg.error(n.msg),this.$nextTick(()=>{x.close()})},downloadVerifyFile(){let x=new Blob([this.form.validation],{type:"application/octet-stream;charset=utf-8"});Ct.saveAs(x,this.form.token)},async handleDeployVerifyFile(x){let k=this.$loading({fullscreen:!0}),n={issue_certificate_id:this.form.id,host_id:x.id,verify_deploy_path:this.verifyDeployPath,challenges:this.list};const E=await this.$http.deployVerifyFile(n);E.code==0?(this.$msg.success("\u90E8\u7F72\u6210\u529F"),this.$emit("on-success",E.data)):this.$msg.error(E.msg),this.$nextTick(()=>{k.close()})}},created(){this.verifyDeployPath="/var/www/challenges/",this.getData()}},Pe={class:""},Ue={class:"text-center mt-md"};function Ne(x,k,n,E,d,i){const a=M("VerifyStepFileDataTable"),r=M("RemoteHost"),l=M("el-form-item"),m=M("el-input"),y=M("CodeHighlight"),g=M("el-form"),b=M("el-button");return at(),ft("div",Pe,[F(a,{form:n.form,list:n.list,"challenge-type":"http-01"},null,8,["form","list"]),F(g,{"label-width":"130px",class:"mt-md"},{default:H(()=>[F(l,{label:"\u670D\u52A1\u5668\u5730\u5740",prop:"create_time"},{default:H(()=>[d.hasInit?(at(),bt(r,{key:0,defaultKeyword:d.host,modelValue:d.deploy_host,"onUpdate:modelValue":k[0]||(k[0]=o=>d.deploy_host=o),onOnConfirm:i.handleDeployVerifyFile},null,8,["defaultKeyword","modelValue","onOnConfirm"])):Dt("",!0)]),_:1}),F(l,{label:"\u670D\u52A1\u5668\u76EE\u5F55",prop:"create_time"},{default:H(()=>[F(m,{modelValue:d.verifyDeployPath,"onUpdate:modelValue":k[1]||(k[1]=o=>d.verifyDeployPath=o)},null,8,["modelValue"])]),_:1}),F(l,{label:"Nginx\u914D\u7F6E",prop:"isp"},{default:H(()=>[F(y,{value:i.nginxConfig},null,8,["value"])]),_:1})]),_:1}),lt("div",Ue,[F(b,{type:"primary",onClick:i.handleVerifyCertificateById},{default:H(()=>[yt("\u9A8C \u8BC1")]),_:1},8,["onClick"])])])}const Le=mt($e,[["render",Ne],["__scopeId","data-v-82d2bd3f"]]);const je={name:"VerifyStep",props:{form:{type:Object}},emits:["on-success"],components:{VerifyStepDNS:me,VerifyStepFile:Le},data(){return{list:[],activeName:"file"}},computed:{fileList(){return this.list.filter(x=>x.challenge&&x.challenge.type=="http-01").map(x=>(x.verify_path="/.well-known/acme-challenge/"+x.token,x.verify_url="http://"+x.domain+x.verify_path,x))},dnsList(){return this.list.filter(x=>x.challenge&&x.challenge.type=="dns-01")}},methods:{async getData(){this.loading=!0;let x={issue_certificate_id:this.form.id};try{const k=await this.$http.getCertificateChallenges(x);this.list=k.data.list.map(n=>(n.challenge&&(n={...n.challenge,...n}),n.status=="valid"?n.status_value=!0:n.status=="invalid"?n.status_value=!1:n.status_value=null,n)),console.log(this.list),this.total=k.data.total}catch(k){console.log(k)}finally{this.loading=!1}},handleSuccess(){this.$emit("on-success")}},mounted(){},created(){this.getData()}},Ze={class:""};function We(x,k,n,E,d,i){const a=M("VerifyStepFile"),r=M("el-tab-pane"),l=M("VerifyStepDNS"),m=M("el-tabs");return at(),ft("div",Ze,[F(m,{modelValue:d.activeName,"onUpdate:modelValue":k[0]||(k[0]=y=>d.activeName=y)},{default:H(()=>[F(r,{label:"\u6587\u4EF6\u9A8C\u8BC1",name:"file",lazy:""},{default:H(()=>[F(a,{form:n.form,list:i.fileList,onOnSuccess:i.handleSuccess},null,8,["form","list","onOnSuccess"])]),_:1}),F(r,{label:"DNS\u9A8C\u8BC1",name:"dns",lazy:""},{default:H(()=>[F(l,{form:n.form,list:i.dnsList,onOnSuccess:i.handleSuccess},null,8,["form","list","onOnSuccess"])]),_:1})]),_:1},8,["modelValue"])])}const He=mt(je,[["render",We],["__scopeId","data-v-d05f5606"]]);const Me={name:"VerifyStep",props:{form:{type:Object}},emits:["on-success"],components:{RemoteHost:Pt},data(){return{hasInit:!1,host:"",keyDeployPath:"",pemDeployPath:""}},computed:{domain_list(){return this.form.domains.join(" ")},nginxConfig(){return Qt(this.nginxConfigTemplate,{language:"nginx"}).value}},methods:{async getData(){this.keyDeployPath=`/path/to/${this.form.domains[0]}.key`,this.pemDeployPath=`/path/to/${this.form.domains[0]}.pem`},handleClose(){this.$emit("on-close")},async handleSubmit(){let x=this.$loading({fullscreen:!0}),k={issue_certificate_id:this.form.id};const n=await this.$http.renewCertificate(k);return n.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(n.msg),this.$nextTick(()=>{x.close()}),n},downloadSSLKeyFile(){console.log(JSON.stringify(this.form,null,2));let x=new Blob([this.form.ssl_certificate_key],{type:"text/plain;charset=utf-8"}),k=this.form.domains[0];Ct.saveAs(x,`${k}.key`)},async downloadSSLFile(){if(!this.form.ssl_certificate){const n=await this.handleSubmit();this.form.ssl_certificate=n.data.ssl_certificate}let x=new Blob([this.form.ssl_certificate],{type:"text/plain;charset=utf-8"}),k=this.form.domains[0];Ct.saveAs(x,`${k}.pem`)},async getDomainHost(){let x={domain:this.form.domains[0]};const k=await this.$http.getDomainHost(x);k.code==0?this.host=k.data.host:this.$msg.error(k.msg),this.hasInit=!0},handleDeployVerifyFile(){}},mounted(){Rt.highlightAll()},created(){this.getDomainHost(),this.getData()}},Ke={class:"text-center mt-md"};function Ge(x,k,n,E,d,i){const a=M("el-button");return at(),ft("div",null,[lt("div",Ke,[F(a,{type:"primary",onClick:i.handleSubmit},{default:H(()=>[yt("\u7533 \u8BF7")]),_:1},8,["onClick"])])])}const qe=mt(Me,[["render",Ge],["__scopeId","data-v-ba24cbba"]]);function Ft(x){throw new Error('Could not dynamically require "'+x+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ht={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(x,k){(function(n){x.exports=n()})(function(){return function n(E,d,i){function a(m,y){if(!d[m]){if(!E[m]){var g=typeof Ft=="function"&&Ft;if(!y&&g)return g(m,!0);if(r)return r(m,!0);var b=new Error("Cannot find module '"+m+"'");throw b.code="MODULE_NOT_FOUND",b}var o=d[m]={exports:{}};E[m][0].call(o.exports,function(_){var s=E[m][1][_];return a(s||_)},o,o.exports,n,E,d,i)}return d[m].exports}for(var r=typeof Ft=="function"&&Ft,l=0;l<i.length;l++)a(i[l]);return a}({1:[function(n,E,d){var i=n("./utils"),a=n("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";d.encode=function(l){for(var m,y,g,b,o,_,s,f=[],c=0,h=l.length,v=h,D=i.getTypeOf(l)!=="string";c<l.length;)v=h-c,g=D?(m=l[c++],y=c<h?l[c++]:0,c<h?l[c++]:0):(m=l.charCodeAt(c++),y=c<h?l.charCodeAt(c++):0,c<h?l.charCodeAt(c++):0),b=m>>2,o=(3&m)<<4|y>>4,_=1<v?(15&y)<<2|g>>6:64,s=2<v?63&g:64,f.push(r.charAt(b)+r.charAt(o)+r.charAt(_)+r.charAt(s));return f.join("")},d.decode=function(l){var m,y,g,b,o,_,s=0,f=0,c="data:";if(l.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");var h,v=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===r.charAt(64)&&v--,l.charAt(l.length-2)===r.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=a.uint8array?new Uint8Array(0|v):new Array(0|v);s<l.length;)m=r.indexOf(l.charAt(s++))<<2|(b=r.indexOf(l.charAt(s++)))>>4,y=(15&b)<<4|(o=r.indexOf(l.charAt(s++)))>>2,g=(3&o)<<6|(_=r.indexOf(l.charAt(s++))),h[f++]=m,o!==64&&(h[f++]=y),_!==64&&(h[f++]=g);return h}},{"./support":30,"./utils":32}],2:[function(n,E,d){var i=n("./external"),a=n("./stream/DataWorker"),r=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function m(y,g,b,o,_){this.compressedSize=y,this.uncompressedSize=g,this.crc32=b,this.compression=o,this.compressedContent=_}m.prototype={getContentWorker:function(){var y=new a(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),g=this;return y.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new a(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(y,g,b){return y.pipe(new r).pipe(new l("uncompressedSize")).pipe(g.compressWorker(b)).pipe(new l("compressedSize")).withStreamInfo("compression",g)},E.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,E,d){var i=n("./stream/GenericWorker");d.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},d.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,E,d){var i=n("./utils"),a=function(){for(var r,l=[],m=0;m<256;m++){r=m;for(var y=0;y<8;y++)r=1&r?3988292384^r>>>1:r>>>1;l[m]=r}return l}();E.exports=function(r,l){return r!==void 0&&r.length?i.getTypeOf(r)!=="string"?function(m,y,g,b){var o=a,_=b+g;m^=-1;for(var s=b;s<_;s++)m=m>>>8^o[255&(m^y[s])];return-1^m}(0|l,r,r.length,0):function(m,y,g,b){var o=a,_=b+g;m^=-1;for(var s=b;s<_;s++)m=m>>>8^o[255&(m^y.charCodeAt(s))];return-1^m}(0|l,r,r.length,0):0}},{"./utils":32}],5:[function(n,E,d){d.base64=!1,d.binary=!1,d.dir=!1,d.createFolders=!0,d.date=null,d.compression=null,d.compressionOptions=null,d.comment=null,d.unixPermissions=null,d.dosPermissions=null},{}],6:[function(n,E,d){var i=null;i=typeof Promise<"u"?Promise:n("lie"),E.exports={Promise:i}},{lie:37}],7:[function(n,E,d){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),r=n("./utils"),l=n("./stream/GenericWorker"),m=i?"uint8array":"array";function y(g,b){l.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=b,this.meta={}}d.magic="\b\0",r.inherits(y,l),y.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(m,g.data),!1)},y.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(b){g.push({data:b,meta:g.meta})}},d.compressWorker=function(g){return new y("Deflate",g)},d.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,E,d){function i(o,_){var s,f="";for(s=0;s<_;s++)f+=String.fromCharCode(255&o),o>>>=8;return f}function a(o,_,s,f,c,h){var v,D,C=o.file,P=o.compression,R=h!==m.utf8encode,j=r.transformTo("string",h(C.name)),B=r.transformTo("string",m.utf8encode(C.name)),G=C.comment,tt=r.transformTo("string",h(G)),w=r.transformTo("string",m.utf8encode(G)),T=B.length!==C.name.length,e=w.length!==G.length,$="",rt="",L="",it=C.dir,Z=C.date,et={crc32:0,compressedSize:0,uncompressedSize:0};_&&!s||(et.crc32=o.crc32,et.compressedSize=o.compressedSize,et.uncompressedSize=o.uncompressedSize);var O=0;_&&(O|=8),R||!T&&!e||(O|=2048);var A=0,Q=0;it&&(A|=16),c==="UNIX"?(Q=798,A|=function(q,dt){var _t=q;return q||(_t=dt?16893:33204),(65535&_t)<<16}(C.unixPermissions,it)):(Q=20,A|=function(q){return 63&(q||0)}(C.dosPermissions)),v=Z.getUTCHours(),v<<=6,v|=Z.getUTCMinutes(),v<<=5,v|=Z.getUTCSeconds()/2,D=Z.getUTCFullYear()-1980,D<<=4,D|=Z.getUTCMonth()+1,D<<=5,D|=Z.getUTCDate(),T&&(rt=i(1,1)+i(y(j),4)+B,$+="up"+i(rt.length,2)+rt),e&&(L=i(1,1)+i(y(tt),4)+w,$+="uc"+i(L.length,2)+L);var Y="";return Y+=`
\0`,Y+=i(O,2),Y+=P.magic,Y+=i(v,2),Y+=i(D,2),Y+=i(et.crc32,4),Y+=i(et.compressedSize,4),Y+=i(et.uncompressedSize,4),Y+=i(j.length,2),Y+=i($.length,2),{fileRecord:g.LOCAL_FILE_HEADER+Y+j+$,dirRecord:g.CENTRAL_FILE_HEADER+i(Q,2)+Y+i(tt.length,2)+"\0\0\0\0"+i(A,4)+i(f,4)+j+$+tt}}var r=n("../utils"),l=n("../stream/GenericWorker"),m=n("../utf8"),y=n("../crc32"),g=n("../signature");function b(o,_,s,f){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=s,this.encodeFileName=f,this.streamFiles=o,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(b,l),b.prototype.push=function(o){var _=o.meta.percent||0,s=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(o):(this.bytesWritten+=o.data.length,l.prototype.push.call(this,{data:o.data,meta:{currentFile:this.currentFile,percent:s?(_+100*(s-f-1))/s:100}}))},b.prototype.openedSource=function(o){this.currentSourceOffset=this.bytesWritten,this.currentFile=o.file.name;var _=this.streamFiles&&!o.file.dir;if(_){var s=a(o,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:s.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(o){this.accumulate=!1;var _=this.streamFiles&&!o.file.dir,s=a(o,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(s.dirRecord),_)this.push({data:function(f){return g.DATA_DESCRIPTOR+i(f.crc32,4)+i(f.compressedSize,4)+i(f.uncompressedSize,4)}(o),meta:{percent:100}});else for(this.push({data:s.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var o=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var s=this.bytesWritten-o,f=function(c,h,v,D,C){var P=r.transformTo("string",C(D));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(c,2)+i(c,2)+i(h,4)+i(v,4)+i(P.length,2)+P}(this.dirRecords.length,s,o,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(o){this._sources.push(o);var _=this;return o.on("data",function(s){_.processChunk(s)}),o.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),o.on("error",function(s){_.error(s)}),this},b.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(o){var _=this._sources;if(!l.prototype.error.call(this,o))return!1;for(var s=0;s<_.length;s++)try{_[s].error(o)}catch{}return!0},b.prototype.lock=function(){l.prototype.lock.call(this);for(var o=this._sources,_=0;_<o.length;_++)o[_].lock()},E.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,E,d){var i=n("../compressions"),a=n("./ZipFileWorker");d.generateWorker=function(r,l,m){var y=new a(l.streamFiles,m,l.platform,l.encodeFileName),g=0;try{r.forEach(function(b,o){g++;var _=function(h,v){var D=h||v,C=i[D];if(!C)throw new Error(D+" is not a valid compression method !");return C}(o.options.compression,l.compression),s=o.options.compressionOptions||l.compressionOptions||{},f=o.dir,c=o.date;o._compressWorker(_,s).withStreamInfo("file",{name:b,dir:f,date:c,comment:o.comment||"",unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions}).pipe(y)}),y.entriesCount=g}catch(b){y.error(b)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,E,d){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new i;for(var r in this)typeof this[r]!="function"&&(a[r]=this[r]);return a}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(a,r){return new i().loadAsync(a,r)},i.external=n("./external"),E.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,E,d){var i=n("./utils"),a=n("./external"),r=n("./utf8"),l=n("./zipEntries"),m=n("./stream/Crc32Probe"),y=n("./nodejsUtils");function g(b){return new a.Promise(function(o,_){var s=b.decompressed.getContentWorker().pipe(new m);s.on("error",function(f){_(f)}).on("end",function(){s.streamInfo.crc32!==b.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):o()}).resume()})}E.exports=function(b,o){var _=this;return o=i.extend(o||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),y.isNode&&y.isStream(b)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",b,!0,o.optimizedBinaryString,o.base64).then(function(s){var f=new l(o);return f.load(s),f}).then(function(s){var f=[a.Promise.resolve(s)],c=s.files;if(o.checkCRC32)for(var h=0;h<c.length;h++)f.push(g(c[h]));return a.Promise.all(f)}).then(function(s){for(var f=s.shift(),c=f.files,h=0;h<c.length;h++){var v=c[h],D=v.fileNameStr,C=i.resolve(v.fileNameStr);_.file(C,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:o.createFolders}),v.dir||(_.file(C).unsafeOriginalName=D)}return f.zipComment.length&&(_.comment=f.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,E,d){var i=n("../utils"),a=n("../stream/GenericWorker");function r(l,m){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(m)}i.inherits(r,a),r.prototype._bindStream=function(l){var m=this;(this._stream=l).pause(),l.on("data",function(y){m.push({data:y,meta:{percent:0}})}).on("error",function(y){m.isPaused?this.generatedError=y:m.error(y)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},r.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},E.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,E,d){var i=n("readable-stream").Readable;function a(r,l,m){i.call(this,l),this._helper=r;var y=this;r.on("data",function(g,b){y.push(g)||y._helper.pause(),m&&m(b)}).on("error",function(g){y.emit("error",g)}).on("end",function(){y.push(null)})}n("../utils").inherits(a,i),a.prototype._read=function(){this._helper.resume()},E.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,E,d){E.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,a);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,a)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var a=new Buffer(i);return a.fill(0),a},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,E,d){function i(C,P,R){var j,B=r.getTypeOf(P),G=r.extend(R||{},y);G.date=G.date||new Date,G.compression!==null&&(G.compression=G.compression.toUpperCase()),typeof G.unixPermissions=="string"&&(G.unixPermissions=parseInt(G.unixPermissions,8)),G.unixPermissions&&16384&G.unixPermissions&&(G.dir=!0),G.dosPermissions&&16&G.dosPermissions&&(G.dir=!0),G.dir&&(C=c(C)),G.createFolders&&(j=f(C))&&h.call(this,j,!0);var tt=B==="string"&&G.binary===!1&&G.base64===!1;R&&R.binary!==void 0||(G.binary=!tt),(P instanceof g&&P.uncompressedSize===0||G.dir||!P||P.length===0)&&(G.base64=!1,G.binary=!0,P="",G.compression="STORE",B="string");var w=null;w=P instanceof g||P instanceof l?P:_.isNode&&_.isStream(P)?new s(C,P):r.prepareContent(C,P,G.binary,G.optimizedBinaryString,G.base64);var T=new b(C,w,G);this.files[C]=T}var a=n("./utf8"),r=n("./utils"),l=n("./stream/GenericWorker"),m=n("./stream/StreamHelper"),y=n("./defaults"),g=n("./compressedObject"),b=n("./zipObject"),o=n("./generate"),_=n("./nodejsUtils"),s=n("./nodejs/NodejsStreamInputAdapter"),f=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var P=C.lastIndexOf("/");return 0<P?C.substring(0,P):""},c=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},h=function(C,P){return P=P!==void 0?P:y.createFolders,C=c(C),this.files[C]||i.call(this,C,null,{dir:!0,createFolders:P}),this.files[C]};function v(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var D={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var P,R,j;for(P in this.files)j=this.files[P],(R=P.slice(this.root.length,P.length))&&P.slice(0,this.root.length)===this.root&&C(R,j)},filter:function(C){var P=[];return this.forEach(function(R,j){C(R,j)&&P.push(j)}),P},file:function(C,P,R){if(arguments.length!==1)return C=this.root+C,i.call(this,C,P,R),this;if(v(C)){var j=C;return this.filter(function(G,tt){return!tt.dir&&j.test(G)})}var B=this.files[this.root+C];return B&&!B.dir?B:null},folder:function(C){if(!C)return this;if(v(C))return this.filter(function(B,G){return G.dir&&C.test(B)});var P=this.root+C,R=h.call(this,P),j=this.clone();return j.root=R.name,j},remove:function(C){C=this.root+C;var P=this.files[C];if(P||(C.slice(-1)!=="/"&&(C+="/"),P=this.files[C]),P&&!P.dir)delete this.files[C];else for(var R=this.filter(function(B,G){return G.name.slice(0,C.length)===C}),j=0;j<R.length;j++)delete this.files[R[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var P,R={};try{if((R=r.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");r.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var j=R.comment||this.comment||"";P=o.generateWorker(this,R,j)}catch(B){(P=new l("error")).error(B)}return new m(P,R.type||"string",R.mimeType)},generateAsync:function(C,P){return this.generateInternalStream(C).accumulate(P)},generateNodeStream:function(C,P){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(P)}};E.exports=D},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,E,d){E.exports=n("stream")},{stream:void 0}],17:[function(n,E,d){var i=n("./DataReader");function a(r){i.call(this,r);for(var l=0;l<this.data.length;l++)r[l]=255&r[l]}n("../utils").inherits(a,i),a.prototype.byteAt=function(r){return this.data[this.zero+r]},a.prototype.lastIndexOfSignature=function(r){for(var l=r.charCodeAt(0),m=r.charCodeAt(1),y=r.charCodeAt(2),g=r.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===l&&this.data[b+1]===m&&this.data[b+2]===y&&this.data[b+3]===g)return b-this.zero;return-1},a.prototype.readAndCheckSignature=function(r){var l=r.charCodeAt(0),m=r.charCodeAt(1),y=r.charCodeAt(2),g=r.charCodeAt(3),b=this.readData(4);return l===b[0]&&m===b[1]&&y===b[2]&&g===b[3]},a.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,l},E.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,E,d){var i=n("../utils");function a(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var l,m=0;for(this.checkOffset(r),l=this.index+r-1;l>=this.index;l--)m=(m<<8)+this.byteAt(l);return this.index+=r,m},readString:function(r){return i.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},E.exports=a},{"../utils":32}],19:[function(n,E,d){var i=n("./Uint8ArrayReader");function a(r){i.call(this,r)}n("../utils").inherits(a,i),a.prototype.readData=function(r){this.checkOffset(r);var l=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,l},E.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,E,d){var i=n("./DataReader");function a(r){i.call(this,r)}n("../utils").inherits(a,i),a.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},a.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},a.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},a.prototype.readData=function(r){this.checkOffset(r);var l=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,l},E.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,E,d){var i=n("./ArrayReader");function a(r){i.call(this,r)}n("../utils").inherits(a,i),a.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,l},E.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,E,d){var i=n("../utils"),a=n("../support"),r=n("./ArrayReader"),l=n("./StringReader"),m=n("./NodeBufferReader"),y=n("./Uint8ArrayReader");E.exports=function(g){var b=i.getTypeOf(g);return i.checkSupport(b),b!=="string"||a.uint8array?b==="nodebuffer"?new m(g):a.uint8array?new y(i.transformTo("uint8array",g)):new r(i.transformTo("array",g)):new l(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,E,d){d.LOCAL_FILE_HEADER="PK",d.CENTRAL_FILE_HEADER="PK",d.CENTRAL_DIRECTORY_END="PK",d.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",d.ZIP64_CENTRAL_DIRECTORY_END="PK",d.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,E,d){var i=n("./GenericWorker"),a=n("../utils");function r(l){i.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(r,i),r.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},E.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(n,E,d){var i=n("./GenericWorker"),a=n("../crc32");function r(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(r,i),r.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},E.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,E,d){var i=n("../utils"),a=n("./GenericWorker");function r(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(r,a),r.prototype.processChunk=function(l){if(l){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+l.data.length}a.prototype.processChunk.call(this,l)},E.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(n,E,d){var i=n("../utils"),a=n("./GenericWorker");function r(l){a.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(y){m.dataIsReady=!0,m.data=y,m.max=y&&y.length||0,m.type=i.getTypeOf(y),m.isPaused||m._tickAndRepeat()},function(y){m.error(y)})}i.inherits(r,a),r.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,m);break;case"uint8array":l=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":l=this.data.slice(this.index,m)}return this.index=m,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},E.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(n,E,d){function i(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,r){return this._listeners[a].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,r){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,r)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var r=this;return a.on("data",function(l){r.processChunk(l)}),a.on("end",function(){r.end()}),a.on("error",function(l){r.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,r){return this.extraStreamInfo[a]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},E.exports=i},{}],29:[function(n,E,d){var i=n("../utils"),a=n("./ConvertWorker"),r=n("./GenericWorker"),l=n("../base64"),m=n("../support"),y=n("../external"),g=null;if(m.nodestream)try{g=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(_,s){return new y.Promise(function(f,c){var h=[],v=_._internalType,D=_._outputType,C=_._mimeType;_.on("data",function(P,R){h.push(P),s&&s(R)}).on("error",function(P){h=[],c(P)}).on("end",function(){try{var P=function(R,j,B){switch(R){case"blob":return i.newBlob(i.transformTo("arraybuffer",j),B);case"base64":return l.encode(j);default:return i.transformTo(R,j)}}(D,function(R,j){var B,G=0,tt=null,w=0;for(B=0;B<j.length;B++)w+=j[B].length;switch(R){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(tt=new Uint8Array(w),B=0;B<j.length;B++)tt.set(j[B],G),G+=j[B].length;return tt;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+R+"'")}}(v,h),C);f(P)}catch(R){c(R)}h=[]}).resume()})}function o(_,s,f){var c=s;switch(s){case"blob":case"arraybuffer":c="uint8array";break;case"base64":c="string"}try{this._internalType=c,this._outputType=s,this._mimeType=f,i.checkSupport(c),this._worker=_.pipe(new a(c)),_.lock()}catch(h){this._worker=new r("error"),this._worker.error(h)}}o.prototype={accumulate:function(_){return b(this,_)},on:function(_,s){var f=this;return _==="data"?this._worker.on(_,function(c){s.call(f,c.data,c.meta)}):this._worker.on(_,function(){i.delay(s,arguments,f)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},_)}},E.exports=o},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,E,d){if(d.base64=!0,d.array=!0,d.string=!0,d.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",d.nodebuffer=typeof Buffer<"u",d.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")d.blob=!1;else{var i=new ArrayBuffer(0);try{d.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(i),d.blob=a.getBlob("application/zip").size===0}catch{d.blob=!1}}}try{d.nodestream=!!n("readable-stream").Readable}catch{d.nodestream=!1}},{"readable-stream":16}],31:[function(n,E,d){for(var i=n("./utils"),a=n("./support"),r=n("./nodejsUtils"),l=n("./stream/GenericWorker"),m=new Array(256),y=0;y<256;y++)m[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;m[254]=m[254]=1;function g(){l.call(this,"utf-8 decode"),this.leftOver=null}function b(){l.call(this,"utf-8 encode")}d.utf8encode=function(o){return a.nodebuffer?r.newBufferFrom(o,"utf-8"):function(_){var s,f,c,h,v,D=_.length,C=0;for(h=0;h<D;h++)(64512&(f=_.charCodeAt(h)))==55296&&h+1<D&&(64512&(c=_.charCodeAt(h+1)))==56320&&(f=65536+(f-55296<<10)+(c-56320),h++),C+=f<128?1:f<2048?2:f<65536?3:4;for(s=a.uint8array?new Uint8Array(C):new Array(C),h=v=0;v<C;h++)(64512&(f=_.charCodeAt(h)))==55296&&h+1<D&&(64512&(c=_.charCodeAt(h+1)))==56320&&(f=65536+(f-55296<<10)+(c-56320),h++),f<128?s[v++]=f:(f<2048?s[v++]=192|f>>>6:(f<65536?s[v++]=224|f>>>12:(s[v++]=240|f>>>18,s[v++]=128|f>>>12&63),s[v++]=128|f>>>6&63),s[v++]=128|63&f);return s}(o)},d.utf8decode=function(o){return a.nodebuffer?i.transformTo("nodebuffer",o).toString("utf-8"):function(_){var s,f,c,h,v=_.length,D=new Array(2*v);for(s=f=0;s<v;)if((c=_[s++])<128)D[f++]=c;else if(4<(h=m[c]))D[f++]=65533,s+=h-1;else{for(c&=h===2?31:h===3?15:7;1<h&&s<v;)c=c<<6|63&_[s++],h--;1<h?D[f++]=65533:c<65536?D[f++]=c:(c-=65536,D[f++]=55296|c>>10&1023,D[f++]=56320|1023&c)}return D.length!==f&&(D.subarray?D=D.subarray(0,f):D.length=f),i.applyFromCharCode(D)}(o=i.transformTo(a.uint8array?"uint8array":"array",o))},i.inherits(g,l),g.prototype.processChunk=function(o){var _=i.transformTo(a.uint8array?"uint8array":"array",o.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var s=_;(_=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),_.set(s,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var f=function(h,v){var D;for((v=v||h.length)>h.length&&(v=h.length),D=v-1;0<=D&&(192&h[D])==128;)D--;return D<0||D===0?v:D+m[h[D]]>v?D:v}(_),c=_;f!==_.length&&(a.uint8array?(c=_.subarray(0,f),this.leftOver=_.subarray(f,_.length)):(c=_.slice(0,f),this.leftOver=_.slice(f,_.length))),this.push({data:d.utf8decode(c),meta:o.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:d.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},d.Utf8DecodeWorker=g,i.inherits(b,l),b.prototype.processChunk=function(o){this.push({data:d.utf8encode(o.data),meta:o.meta})},d.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,E,d){var i=n("./support"),a=n("./base64"),r=n("./nodejsUtils"),l=n("./external");function m(s){return s}function y(s,f){for(var c=0;c<s.length;++c)f[c]=255&s.charCodeAt(c);return f}n("setimmediate"),d.newBlob=function(s,f){d.checkSupport("blob");try{return new Blob([s],{type:f})}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return c.append(s),c.getBlob(f)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(s,f,c){var h=[],v=0,D=s.length;if(D<=c)return String.fromCharCode.apply(null,s);for(;v<D;)f==="array"||f==="nodebuffer"?h.push(String.fromCharCode.apply(null,s.slice(v,Math.min(v+c,D)))):h.push(String.fromCharCode.apply(null,s.subarray(v,Math.min(v+c,D)))),v+=c;return h.join("")},stringifyByChar:function(s){for(var f="",c=0;c<s.length;c++)f+=String.fromCharCode(s[c]);return f},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function b(s){var f=65536,c=d.getTypeOf(s),h=!0;if(c==="uint8array"?h=g.applyCanBeUsed.uint8array:c==="nodebuffer"&&(h=g.applyCanBeUsed.nodebuffer),h)for(;1<f;)try{return g.stringifyByChunk(s,c,f)}catch{f=Math.floor(f/2)}return g.stringifyByChar(s)}function o(s,f){for(var c=0;c<s.length;c++)f[c]=s[c];return f}d.applyFromCharCode=b;var _={};_.string={string:m,array:function(s){return y(s,new Array(s.length))},arraybuffer:function(s){return _.string.uint8array(s).buffer},uint8array:function(s){return y(s,new Uint8Array(s.length))},nodebuffer:function(s){return y(s,r.allocBuffer(s.length))}},_.array={string:b,array:m,arraybuffer:function(s){return new Uint8Array(s).buffer},uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return r.newBufferFrom(s)}},_.arraybuffer={string:function(s){return b(new Uint8Array(s))},array:function(s){return o(new Uint8Array(s),new Array(s.byteLength))},arraybuffer:m,uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return r.newBufferFrom(new Uint8Array(s))}},_.uint8array={string:b,array:function(s){return o(s,new Array(s.length))},arraybuffer:function(s){return s.buffer},uint8array:m,nodebuffer:function(s){return r.newBufferFrom(s)}},_.nodebuffer={string:b,array:function(s){return o(s,new Array(s.length))},arraybuffer:function(s){return _.nodebuffer.uint8array(s).buffer},uint8array:function(s){return o(s,new Uint8Array(s.length))},nodebuffer:m},d.transformTo=function(s,f){if(f=f||"",!s)return f;d.checkSupport(s);var c=d.getTypeOf(f);return _[c][s](f)},d.resolve=function(s){for(var f=s.split("/"),c=[],h=0;h<f.length;h++){var v=f[h];v==="."||v===""&&h!==0&&h!==f.length-1||(v===".."?c.pop():c.push(v))}return c.join("/")},d.getTypeOf=function(s){return typeof s=="string"?"string":Object.prototype.toString.call(s)==="[object Array]"?"array":i.nodebuffer&&r.isBuffer(s)?"nodebuffer":i.uint8array&&s instanceof Uint8Array?"uint8array":i.arraybuffer&&s instanceof ArrayBuffer?"arraybuffer":void 0},d.checkSupport=function(s){if(!i[s.toLowerCase()])throw new Error(s+" is not supported by this platform")},d.MAX_VALUE_16BITS=65535,d.MAX_VALUE_32BITS=-1,d.pretty=function(s){var f,c,h="";for(c=0;c<(s||"").length;c++)h+="\\x"+((f=s.charCodeAt(c))<16?"0":"")+f.toString(16).toUpperCase();return h},d.delay=function(s,f,c){setImmediate(function(){s.apply(c||null,f||[])})},d.inherits=function(s,f){function c(){}c.prototype=f.prototype,s.prototype=new c},d.extend=function(){var s,f,c={};for(s=0;s<arguments.length;s++)for(f in arguments[s])Object.prototype.hasOwnProperty.call(arguments[s],f)&&c[f]===void 0&&(c[f]=arguments[s][f]);return c},d.prepareContent=function(s,f,c,h,v){return l.Promise.resolve(f).then(function(D){return i.blob&&(D instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(D))!==-1)&&typeof FileReader<"u"?new l.Promise(function(C,P){var R=new FileReader;R.onload=function(j){C(j.target.result)},R.onerror=function(j){P(j.target.error)},R.readAsArrayBuffer(D)}):D}).then(function(D){var C=d.getTypeOf(D);return C?(C==="arraybuffer"?D=d.transformTo("uint8array",D):C==="string"&&(v?D=a.decode(D):c&&h!==!0&&(D=function(P){return y(P,i.uint8array?new Uint8Array(P.length):new Array(P.length))}(D))),D):l.Promise.reject(new Error("Can't read the data of '"+s+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,E,d){var i=n("./reader/readerFor"),a=n("./utils"),r=n("./signature"),l=n("./zipEntry"),m=n("./support");function y(g){this.files=[],this.loadOptions=g}y.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(b)+", expected "+a.pretty(g)+")")}},isSignature:function(g,b){var o=this.reader.index;this.reader.setIndex(g);var _=this.reader.readString(4)===b;return this.reader.setIndex(o),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),b=m.uint8array?"uint8array":"array",o=a.transformTo(b,g);this.zipComment=this.loadOptions.decodeFileName(o)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,b,o,_=this.zip64EndOfCentralSize-44;0<_;)g=this.reader.readInt(2),b=this.reader.readInt(4),o=this.reader.readData(b),this.zip64ExtensibleData[g]={id:g,length:b,value:o}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,b;for(g=0;g<this.files.length;g++)b=this.files[g],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(g=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var b=g;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var o=this.centralDirOffset+this.centralDirSize;this.zip64&&(o+=20,o+=12+this.zip64EndOfCentralSize);var _=b-o;if(0<_)this.isSignature(b,r.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(g){this.reader=i(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},E.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,E,d){var i=n("./reader/readerFor"),a=n("./utils"),r=n("./compressedObject"),l=n("./crc32"),m=n("./utf8"),y=n("./compressions"),g=n("./support");function b(o,_){this.options=o,this.loadOptions=_}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(o){var _,s;if(o.skip(22),this.fileNameLength=o.readInt(2),s=o.readInt(2),this.fileName=o.readData(this.fileNameLength),o.skip(s),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(f){for(var c in y)if(Object.prototype.hasOwnProperty.call(y,c)&&y[c].magic===f)return y[c];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,_,o.readData(this.compressedSize))},readCentralPart:function(o){this.versionMadeBy=o.readInt(2),o.skip(2),this.bitFlag=o.readInt(2),this.compressionMethod=o.readString(2),this.date=o.readDate(),this.crc32=o.readInt(4),this.compressedSize=o.readInt(4),this.uncompressedSize=o.readInt(4);var _=o.readInt(2);if(this.extraFieldsLength=o.readInt(2),this.fileCommentLength=o.readInt(2),this.diskNumberStart=o.readInt(2),this.internalFileAttributes=o.readInt(2),this.externalFileAttributes=o.readInt(4),this.localHeaderOffset=o.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");o.skip(_),this.readExtraFields(o),this.parseZIP64ExtraField(o),this.fileComment=o.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var o=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),o==0&&(this.dosPermissions=63&this.externalFileAttributes),o==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var o=i(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=o.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=o.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=o.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=o.readInt(4))}},readExtraFields:function(o){var _,s,f,c=o.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});o.index+4<c;)_=o.readInt(2),s=o.readInt(2),f=o.readData(s),this.extraFields[_]={id:_,length:s,value:f};o.setIndex(c)},handleUTF8:function(){var o=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var s=a.transformTo(o,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(s)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var c=a.transformTo(o,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(c)}}},findExtraFieldUnicodePath:function(){var o=this.extraFields[28789];if(o){var _=i(o.value);return _.readInt(1)!==1||l(this.fileName)!==_.readInt(4)?null:m.utf8decode(_.readData(o.length-5))}return null},findExtraFieldUnicodeComment:function(){var o=this.extraFields[25461];if(o){var _=i(o.value);return _.readInt(1)!==1||l(this.fileComment)!==_.readInt(4)?null:m.utf8decode(_.readData(o.length-5))}return null}},E.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,E,d){function i(_,s,f){this.name=_,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=s,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var a=n("./stream/StreamHelper"),r=n("./stream/DataWorker"),l=n("./utf8"),m=n("./compressedObject"),y=n("./stream/GenericWorker");i.prototype={internalStream:function(_){var s=null,f="string";try{if(!_)throw new Error("No output type specified.");var c=(f=_.toLowerCase())==="string"||f==="text";f!=="binarystring"&&f!=="text"||(f="string"),s=this._decompressWorker();var h=!this._dataBinary;h&&!c&&(s=s.pipe(new l.Utf8EncodeWorker)),!h&&c&&(s=s.pipe(new l.Utf8DecodeWorker))}catch(v){(s=new y("error")).error(v)}return new a(s,f,"")},async:function(_,s){return this.internalStream(_).accumulate(s)},nodeStream:function(_,s){return this.internalStream(_||"nodebuffer").toNodejsStream(s)},_compressWorker:function(_,s){if(this._data instanceof m&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new l.Utf8EncodeWorker)),m.createWorkerFrom(f,_,s)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof y?this._data:new r(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},o=0;o<g.length;o++)i.prototype[g[o]]=b;E.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,E,d){(function(i){var a,r,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var m=0,y=new l(_),g=i.document.createTextNode("");y.observe(g,{characterData:!0}),a=function(){g.data=m=++m%2}}else if(i.setImmediate||i.MessageChannel===void 0)a="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var s=i.document.createElement("script");s.onreadystatechange=function(){_(),s.onreadystatechange=null,s.parentNode.removeChild(s),s=null},i.document.documentElement.appendChild(s)}:function(){setTimeout(_,0)};else{var b=new i.MessageChannel;b.port1.onmessage=_,a=function(){b.port2.postMessage(0)}}var o=[];function _(){var s,f;r=!0;for(var c=o.length;c;){for(f=o,o=[],s=-1;++s<c;)f[s]();c=o.length}r=!1}E.exports=function(s){o.push(s)!==1||r||a()}}).call(this,typeof Bt<"u"?Bt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,E,d){var i=n("immediate");function a(){}var r={},l=["REJECTED"],m=["FULFILLED"],y=["PENDING"];function g(c){if(typeof c!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,c!==a&&s(this,c)}function b(c,h,v){this.promise=c,typeof h=="function"&&(this.onFulfilled=h,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function o(c,h,v){i(function(){var D;try{D=h(v)}catch(C){return r.reject(c,C)}D===c?r.reject(c,new TypeError("Cannot resolve promise with itself")):r.resolve(c,D)})}function _(c){var h=c&&c.then;if(c&&(typeof c=="object"||typeof c=="function")&&typeof h=="function")return function(){h.apply(c,arguments)}}function s(c,h){var v=!1;function D(R){v||(v=!0,r.reject(c,R))}function C(R){v||(v=!0,r.resolve(c,R))}var P=f(function(){h(C,D)});P.status==="error"&&D(P.value)}function f(c,h){var v={};try{v.value=c(h),v.status="success"}catch(D){v.status="error",v.value=D}return v}(E.exports=g).prototype.finally=function(c){if(typeof c!="function")return this;var h=this.constructor;return this.then(function(v){return h.resolve(c()).then(function(){return v})},function(v){return h.resolve(c()).then(function(){throw v})})},g.prototype.catch=function(c){return this.then(null,c)},g.prototype.then=function(c,h){if(typeof c!="function"&&this.state===m||typeof h!="function"&&this.state===l)return this;var v=new this.constructor(a);return this.state!==y?o(v,this.state===m?c:h,this.outcome):this.queue.push(new b(v,c,h)),v},b.prototype.callFulfilled=function(c){r.resolve(this.promise,c)},b.prototype.otherCallFulfilled=function(c){o(this.promise,this.onFulfilled,c)},b.prototype.callRejected=function(c){r.reject(this.promise,c)},b.prototype.otherCallRejected=function(c){o(this.promise,this.onRejected,c)},r.resolve=function(c,h){var v=f(_,h);if(v.status==="error")return r.reject(c,v.value);var D=v.value;if(D)s(c,D);else{c.state=m,c.outcome=h;for(var C=-1,P=c.queue.length;++C<P;)c.queue[C].callFulfilled(h)}return c},r.reject=function(c,h){c.state=l,c.outcome=h;for(var v=-1,D=c.queue.length;++v<D;)c.queue[v].callRejected(h);return c},g.resolve=function(c){return c instanceof this?c:r.resolve(new this(a),c)},g.reject=function(c){var h=new this(a);return r.reject(h,c)},g.all=function(c){var h=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=c.length,D=!1;if(!v)return this.resolve([]);for(var C=new Array(v),P=0,R=-1,j=new this(a);++R<v;)B(c[R],R);return j;function B(G,tt){h.resolve(G).then(function(w){C[tt]=w,++P!==v||D||(D=!0,r.resolve(j,C))},function(w){D||(D=!0,r.reject(j,w))})}},g.race=function(c){var h=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=c.length,D=!1;if(!v)return this.resolve([]);for(var C=-1,P=new this(a);++C<v;)R=c[C],h.resolve(R).then(function(j){D||(D=!0,r.resolve(P,j))},function(j){D||(D=!0,r.reject(P,j))});var R;return P}},{immediate:36}],38:[function(n,E,d){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),E.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,E,d){var i=n("./zlib/deflate"),a=n("./utils/common"),r=n("./utils/strings"),l=n("./zlib/messages"),m=n("./zlib/zstream"),y=Object.prototype.toString,g=0,b=-1,o=0,_=8;function s(c){if(!(this instanceof s))return new s(c);this.options=a.assign({level:b,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:o,to:""},c||{});var h=this.options;h.raw&&0<h.windowBits?h.windowBits=-h.windowBits:h.gzip&&0<h.windowBits&&h.windowBits<16&&(h.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var v=i.deflateInit2(this.strm,h.level,h.method,h.windowBits,h.memLevel,h.strategy);if(v!==g)throw new Error(l[v]);if(h.header&&i.deflateSetHeader(this.strm,h.header),h.dictionary){var D;if(D=typeof h.dictionary=="string"?r.string2buf(h.dictionary):y.call(h.dictionary)==="[object ArrayBuffer]"?new Uint8Array(h.dictionary):h.dictionary,(v=i.deflateSetDictionary(this.strm,D))!==g)throw new Error(l[v]);this._dict_set=!0}}function f(c,h){var v=new s(h);if(v.push(c,!0),v.err)throw v.msg||l[v.err];return v.result}s.prototype.push=function(c,h){var v,D,C=this.strm,P=this.options.chunkSize;if(this.ended)return!1;D=h===~~h?h:h===!0?4:0,typeof c=="string"?C.input=r.string2buf(c):y.call(c)==="[object ArrayBuffer]"?C.input=new Uint8Array(c):C.input=c,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new a.Buf8(P),C.next_out=0,C.avail_out=P),(v=i.deflate(C,D))!==1&&v!==g)return this.onEnd(v),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||D!==4&&D!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(a.shrinkBuf(C.output,C.next_out))):this.onData(a.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&v!==1);return D===4?(v=i.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===g):D!==2||(this.onEnd(g),!(C.avail_out=0))},s.prototype.onData=function(c){this.chunks.push(c)},s.prototype.onEnd=function(c){c===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},d.Deflate=s,d.deflate=f,d.deflateRaw=function(c,h){return(h=h||{}).raw=!0,f(c,h)},d.gzip=function(c,h){return(h=h||{}).gzip=!0,f(c,h)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,E,d){var i=n("./zlib/inflate"),a=n("./utils/common"),r=n("./utils/strings"),l=n("./zlib/constants"),m=n("./zlib/messages"),y=n("./zlib/zstream"),g=n("./zlib/gzheader"),b=Object.prototype.toString;function o(s){if(!(this instanceof o))return new o(s);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},s||{});var f=this.options;f.raw&&0<=f.windowBits&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(0<=f.windowBits&&f.windowBits<16)||s&&s.windowBits||(f.windowBits+=32),15<f.windowBits&&f.windowBits<48&&(15&f.windowBits)==0&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var c=i.inflateInit2(this.strm,f.windowBits);if(c!==l.Z_OK)throw new Error(m[c]);this.header=new g,i.inflateGetHeader(this.strm,this.header)}function _(s,f){var c=new o(f);if(c.push(s,!0),c.err)throw c.msg||m[c.err];return c.result}o.prototype.push=function(s,f){var c,h,v,D,C,P,R=this.strm,j=this.options.chunkSize,B=this.options.dictionary,G=!1;if(this.ended)return!1;h=f===~~f?f:f===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof s=="string"?R.input=r.binstring2buf(s):b.call(s)==="[object ArrayBuffer]"?R.input=new Uint8Array(s):R.input=s,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new a.Buf8(j),R.next_out=0,R.avail_out=j),(c=i.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&B&&(P=typeof B=="string"?r.string2buf(B):b.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,c=i.inflateSetDictionary(this.strm,P)),c===l.Z_BUF_ERROR&&G===!0&&(c=l.Z_OK,G=!1),c!==l.Z_STREAM_END&&c!==l.Z_OK)return this.onEnd(c),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&c!==l.Z_STREAM_END&&(R.avail_in!==0||h!==l.Z_FINISH&&h!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=r.utf8border(R.output,R.next_out),D=R.next_out-v,C=r.buf2string(R.output,v),R.next_out=D,R.avail_out=j-D,D&&a.arraySet(R.output,R.output,v,D,0),this.onData(C)):this.onData(a.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(G=!0)}while((0<R.avail_in||R.avail_out===0)&&c!==l.Z_STREAM_END);return c===l.Z_STREAM_END&&(h=l.Z_FINISH),h===l.Z_FINISH?(c=i.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===l.Z_OK):h!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},o.prototype.onData=function(s){this.chunks.push(s)},o.prototype.onEnd=function(s){s===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg},d.Inflate=o,d.inflate=_,d.inflateRaw=function(s,f){return(f=f||{}).raw=!0,_(s,f)},d.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,E,d){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";d.assign=function(l){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var y=m.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var g in y)y.hasOwnProperty(g)&&(l[g]=y[g])}}return l},d.shrinkBuf=function(l,m){return l.length===m?l:l.subarray?l.subarray(0,m):(l.length=m,l)};var a={arraySet:function(l,m,y,g,b){if(m.subarray&&l.subarray)l.set(m.subarray(y,y+g),b);else for(var o=0;o<g;o++)l[b+o]=m[y+o]},flattenChunks:function(l){var m,y,g,b,o,_;for(m=g=0,y=l.length;m<y;m++)g+=l[m].length;for(_=new Uint8Array(g),m=b=0,y=l.length;m<y;m++)o=l[m],_.set(o,b),b+=o.length;return _}},r={arraySet:function(l,m,y,g,b){for(var o=0;o<g;o++)l[b+o]=m[y+o]},flattenChunks:function(l){return[].concat.apply([],l)}};d.setTyped=function(l){l?(d.Buf8=Uint8Array,d.Buf16=Uint16Array,d.Buf32=Int32Array,d.assign(d,a)):(d.Buf8=Array,d.Buf16=Array,d.Buf32=Array,d.assign(d,r))},d.setTyped(i)},{}],42:[function(n,E,d){var i=n("./common"),a=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var l=new i.Buf8(256),m=0;m<256;m++)l[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function y(g,b){if(b<65537&&(g.subarray&&r||!g.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(g,b));for(var o="",_=0;_<b;_++)o+=String.fromCharCode(g[_]);return o}l[254]=l[254]=1,d.string2buf=function(g){var b,o,_,s,f,c=g.length,h=0;for(s=0;s<c;s++)(64512&(o=g.charCodeAt(s)))==55296&&s+1<c&&(64512&(_=g.charCodeAt(s+1)))==56320&&(o=65536+(o-55296<<10)+(_-56320),s++),h+=o<128?1:o<2048?2:o<65536?3:4;for(b=new i.Buf8(h),s=f=0;f<h;s++)(64512&(o=g.charCodeAt(s)))==55296&&s+1<c&&(64512&(_=g.charCodeAt(s+1)))==56320&&(o=65536+(o-55296<<10)+(_-56320),s++),o<128?b[f++]=o:(o<2048?b[f++]=192|o>>>6:(o<65536?b[f++]=224|o>>>12:(b[f++]=240|o>>>18,b[f++]=128|o>>>12&63),b[f++]=128|o>>>6&63),b[f++]=128|63&o);return b},d.buf2binstring=function(g){return y(g,g.length)},d.binstring2buf=function(g){for(var b=new i.Buf8(g.length),o=0,_=b.length;o<_;o++)b[o]=g.charCodeAt(o);return b},d.buf2string=function(g,b){var o,_,s,f,c=b||g.length,h=new Array(2*c);for(o=_=0;o<c;)if((s=g[o++])<128)h[_++]=s;else if(4<(f=l[s]))h[_++]=65533,o+=f-1;else{for(s&=f===2?31:f===3?15:7;1<f&&o<c;)s=s<<6|63&g[o++],f--;1<f?h[_++]=65533:s<65536?h[_++]=s:(s-=65536,h[_++]=55296|s>>10&1023,h[_++]=56320|1023&s)}return y(h,_)},d.utf8border=function(g,b){var o;for((b=b||g.length)>g.length&&(b=g.length),o=b-1;0<=o&&(192&g[o])==128;)o--;return o<0||o===0?b:o+l[g[o]]>b?o:b}},{"./common":41}],43:[function(n,E,d){E.exports=function(i,a,r,l){for(var m=65535&i|0,y=i>>>16&65535|0,g=0;r!==0;){for(r-=g=2e3<r?2e3:r;y=y+(m=m+a[l++]|0)|0,--g;);m%=65521,y%=65521}return m|y<<16|0}},{}],44:[function(n,E,d){E.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,E,d){var i=function(){for(var a,r=[],l=0;l<256;l++){a=l;for(var m=0;m<8;m++)a=1&a?3988292384^a>>>1:a>>>1;r[l]=a}return r}();E.exports=function(a,r,l,m){var y=i,g=m+l;a^=-1;for(var b=m;b<g;b++)a=a>>>8^y[255&(a^r[b])];return-1^a}},{}],46:[function(n,E,d){var i,a=n("../utils/common"),r=n("./trees"),l=n("./adler32"),m=n("./crc32"),y=n("./messages"),g=0,b=4,o=0,_=-2,s=-1,f=4,c=2,h=8,v=9,D=286,C=30,P=19,R=2*D+1,j=15,B=3,G=258,tt=G+B+1,w=42,T=113,e=1,$=2,rt=3,L=4;function it(t,V){return t.msg=y[V],V}function Z(t){return(t<<1)-(4<t?9:0)}function et(t){for(var V=t.length;0<=--V;)t[V]=0}function O(t){var V=t.state,I=V.pending;I>t.avail_out&&(I=t.avail_out),I!==0&&(a.arraySet(t.output,V.pending_buf,V.pending_out,I,t.next_out),t.next_out+=I,V.pending_out+=I,t.total_out+=I,t.avail_out-=I,V.pending-=I,V.pending===0&&(V.pending_out=0))}function A(t,V){r._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,V),t.block_start=t.strstart,O(t.strm)}function Q(t,V){t.pending_buf[t.pending++]=V}function Y(t,V){t.pending_buf[t.pending++]=V>>>8&255,t.pending_buf[t.pending++]=255&V}function q(t,V){var I,p,u=t.max_chain_length,S=t.strstart,U=t.prev_length,N=t.nice_match,z=t.strstart>t.w_size-tt?t.strstart-(t.w_size-tt):0,W=t.window,X=t.w_mask,K=t.prev,J=t.strstart+G,ct=W[S+U-1],st=W[S+U];t.prev_length>=t.good_match&&(u>>=2),N>t.lookahead&&(N=t.lookahead);do if(W[(I=V)+U]===st&&W[I+U-1]===ct&&W[I]===W[S]&&W[++I]===W[S+1]){S+=2,I++;do;while(W[++S]===W[++I]&&W[++S]===W[++I]&&W[++S]===W[++I]&&W[++S]===W[++I]&&W[++S]===W[++I]&&W[++S]===W[++I]&&W[++S]===W[++I]&&W[++S]===W[++I]&&S<J);if(p=G-(J-S),S=J-G,U<p){if(t.match_start=V,N<=(U=p))break;ct=W[S+U-1],st=W[S+U]}}while((V=K[V&X])>z&&--u!=0);return U<=t.lookahead?U:t.lookahead}function dt(t){var V,I,p,u,S,U,N,z,W,X,K=t.w_size;do{if(u=t.window_size-t.lookahead-t.strstart,t.strstart>=K+(K-tt)){for(a.arraySet(t.window,t.window,K,K,0),t.match_start-=K,t.strstart-=K,t.block_start-=K,V=I=t.hash_size;p=t.head[--V],t.head[V]=K<=p?p-K:0,--I;);for(V=I=K;p=t.prev[--V],t.prev[V]=K<=p?p-K:0,--I;);u+=K}if(t.strm.avail_in===0)break;if(U=t.strm,N=t.window,z=t.strstart+t.lookahead,W=u,X=void 0,X=U.avail_in,W<X&&(X=W),I=X===0?0:(U.avail_in-=X,a.arraySet(N,U.input,U.next_in,X,z),U.state.wrap===1?U.adler=l(U.adler,N,X,z):U.state.wrap===2&&(U.adler=m(U.adler,N,X,z)),U.next_in+=X,U.total_in+=X,X),t.lookahead+=I,t.lookahead+t.insert>=B)for(S=t.strstart-t.insert,t.ins_h=t.window[S],t.ins_h=(t.ins_h<<t.hash_shift^t.window[S+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[S+B-1])&t.hash_mask,t.prev[S&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=S,S++,t.insert--,!(t.lookahead+t.insert<B)););}while(t.lookahead<tt&&t.strm.avail_in!==0)}function _t(t,V){for(var I,p;;){if(t.lookahead<tt){if(dt(t),t.lookahead<tt&&V===g)return e;if(t.lookahead===0)break}if(I=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),I!==0&&t.strstart-I<=t.w_size-tt&&(t.match_length=q(t,I)),t.match_length>=B)if(p=r._tr_tally(t,t.strstart-t.match_start,t.match_length-B),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=B){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else p=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(p&&(A(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<B-1?t.strstart:B-1,V===b?(A(t,!0),t.strm.avail_out===0?rt:L):t.last_lit&&(A(t,!1),t.strm.avail_out===0)?e:$}function nt(t,V){for(var I,p,u;;){if(t.lookahead<tt){if(dt(t),t.lookahead<tt&&V===g)return e;if(t.lookahead===0)break}if(I=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=B-1,I!==0&&t.prev_length<t.max_lazy_match&&t.strstart-I<=t.w_size-tt&&(t.match_length=q(t,I),t.match_length<=5&&(t.strategy===1||t.match_length===B&&4096<t.strstart-t.match_start)&&(t.match_length=B-1)),t.prev_length>=B&&t.match_length<=t.prev_length){for(u=t.strstart+t.lookahead-B,p=r._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-B),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=u&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=B-1,t.strstart++,p&&(A(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((p=r._tr_tally(t,0,t.window[t.strstart-1]))&&A(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(p=r._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<B-1?t.strstart:B-1,V===b?(A(t,!0),t.strm.avail_out===0?rt:L):t.last_lit&&(A(t,!1),t.strm.avail_out===0)?e:$}function ot(t,V,I,p,u){this.good_length=t,this.max_lazy=V,this.nice_length=I,this.max_chain=p,this.func=u}function pt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=h,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*R),this.dyn_dtree=new a.Buf16(2*(2*C+1)),this.bl_tree=new a.Buf16(2*(2*P+1)),et(this.dyn_ltree),et(this.dyn_dtree),et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(j+1),this.heap=new a.Buf16(2*D+1),et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*D+1),et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ut(t){var V;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=c,(V=t.state).pending=0,V.pending_out=0,V.wrap<0&&(V.wrap=-V.wrap),V.status=V.wrap?w:T,t.adler=V.wrap===2?0:1,V.last_flush=g,r._tr_init(V),o):it(t,_)}function kt(t){var V=ut(t);return V===o&&function(I){I.window_size=2*I.w_size,et(I.head),I.max_lazy_match=i[I.level].max_lazy,I.good_match=i[I.level].good_length,I.nice_match=i[I.level].nice_length,I.max_chain_length=i[I.level].max_chain,I.strstart=0,I.block_start=0,I.lookahead=0,I.insert=0,I.match_length=I.prev_length=B-1,I.match_available=0,I.ins_h=0}(t.state),V}function vt(t,V,I,p,u,S){if(!t)return _;var U=1;if(V===s&&(V=6),p<0?(U=0,p=-p):15<p&&(U=2,p-=16),u<1||v<u||I!==h||p<8||15<p||V<0||9<V||S<0||f<S)return it(t,_);p===8&&(p=9);var N=new pt;return(t.state=N).strm=t,N.wrap=U,N.gzhead=null,N.w_bits=p,N.w_size=1<<N.w_bits,N.w_mask=N.w_size-1,N.hash_bits=u+7,N.hash_size=1<<N.hash_bits,N.hash_mask=N.hash_size-1,N.hash_shift=~~((N.hash_bits+B-1)/B),N.window=new a.Buf8(2*N.w_size),N.head=new a.Buf16(N.hash_size),N.prev=new a.Buf16(N.w_size),N.lit_bufsize=1<<u+6,N.pending_buf_size=4*N.lit_bufsize,N.pending_buf=new a.Buf8(N.pending_buf_size),N.d_buf=1*N.lit_bufsize,N.l_buf=3*N.lit_bufsize,N.level=V,N.strategy=S,N.method=I,kt(t)}i=[new ot(0,0,0,0,function(t,V){var I=65535;for(I>t.pending_buf_size-5&&(I=t.pending_buf_size-5);;){if(t.lookahead<=1){if(dt(t),t.lookahead===0&&V===g)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var p=t.block_start+I;if((t.strstart===0||t.strstart>=p)&&(t.lookahead=t.strstart-p,t.strstart=p,A(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-tt&&(A(t,!1),t.strm.avail_out===0))return e}return t.insert=0,V===b?(A(t,!0),t.strm.avail_out===0?rt:L):(t.strstart>t.block_start&&(A(t,!1),t.strm.avail_out),e)}),new ot(4,4,8,4,_t),new ot(4,5,16,8,_t),new ot(4,6,32,32,_t),new ot(4,4,16,16,nt),new ot(8,16,32,32,nt),new ot(8,16,128,128,nt),new ot(8,32,128,256,nt),new ot(32,128,258,1024,nt),new ot(32,258,258,4096,nt)],d.deflateInit=function(t,V){return vt(t,V,h,15,8,0)},d.deflateInit2=vt,d.deflateReset=kt,d.deflateResetKeep=ut,d.deflateSetHeader=function(t,V){return t&&t.state?t.state.wrap!==2?_:(t.state.gzhead=V,o):_},d.deflate=function(t,V){var I,p,u,S;if(!t||!t.state||5<V||V<0)return t?it(t,_):_;if(p=t.state,!t.output||!t.input&&t.avail_in!==0||p.status===666&&V!==b)return it(t,t.avail_out===0?-5:_);if(p.strm=t,I=p.last_flush,p.last_flush=V,p.status===w)if(p.wrap===2)t.adler=0,Q(p,31),Q(p,139),Q(p,8),p.gzhead?(Q(p,(p.gzhead.text?1:0)+(p.gzhead.hcrc?2:0)+(p.gzhead.extra?4:0)+(p.gzhead.name?8:0)+(p.gzhead.comment?16:0)),Q(p,255&p.gzhead.time),Q(p,p.gzhead.time>>8&255),Q(p,p.gzhead.time>>16&255),Q(p,p.gzhead.time>>24&255),Q(p,p.level===9?2:2<=p.strategy||p.level<2?4:0),Q(p,255&p.gzhead.os),p.gzhead.extra&&p.gzhead.extra.length&&(Q(p,255&p.gzhead.extra.length),Q(p,p.gzhead.extra.length>>8&255)),p.gzhead.hcrc&&(t.adler=m(t.adler,p.pending_buf,p.pending,0)),p.gzindex=0,p.status=69):(Q(p,0),Q(p,0),Q(p,0),Q(p,0),Q(p,0),Q(p,p.level===9?2:2<=p.strategy||p.level<2?4:0),Q(p,3),p.status=T);else{var U=h+(p.w_bits-8<<4)<<8;U|=(2<=p.strategy||p.level<2?0:p.level<6?1:p.level===6?2:3)<<6,p.strstart!==0&&(U|=32),U+=31-U%31,p.status=T,Y(p,U),p.strstart!==0&&(Y(p,t.adler>>>16),Y(p,65535&t.adler)),t.adler=1}if(p.status===69)if(p.gzhead.extra){for(u=p.pending;p.gzindex<(65535&p.gzhead.extra.length)&&(p.pending!==p.pending_buf_size||(p.gzhead.hcrc&&p.pending>u&&(t.adler=m(t.adler,p.pending_buf,p.pending-u,u)),O(t),u=p.pending,p.pending!==p.pending_buf_size));)Q(p,255&p.gzhead.extra[p.gzindex]),p.gzindex++;p.gzhead.hcrc&&p.pending>u&&(t.adler=m(t.adler,p.pending_buf,p.pending-u,u)),p.gzindex===p.gzhead.extra.length&&(p.gzindex=0,p.status=73)}else p.status=73;if(p.status===73)if(p.gzhead.name){u=p.pending;do{if(p.pending===p.pending_buf_size&&(p.gzhead.hcrc&&p.pending>u&&(t.adler=m(t.adler,p.pending_buf,p.pending-u,u)),O(t),u=p.pending,p.pending===p.pending_buf_size)){S=1;break}S=p.gzindex<p.gzhead.name.length?255&p.gzhead.name.charCodeAt(p.gzindex++):0,Q(p,S)}while(S!==0);p.gzhead.hcrc&&p.pending>u&&(t.adler=m(t.adler,p.pending_buf,p.pending-u,u)),S===0&&(p.gzindex=0,p.status=91)}else p.status=91;if(p.status===91)if(p.gzhead.comment){u=p.pending;do{if(p.pending===p.pending_buf_size&&(p.gzhead.hcrc&&p.pending>u&&(t.adler=m(t.adler,p.pending_buf,p.pending-u,u)),O(t),u=p.pending,p.pending===p.pending_buf_size)){S=1;break}S=p.gzindex<p.gzhead.comment.length?255&p.gzhead.comment.charCodeAt(p.gzindex++):0,Q(p,S)}while(S!==0);p.gzhead.hcrc&&p.pending>u&&(t.adler=m(t.adler,p.pending_buf,p.pending-u,u)),S===0&&(p.status=103)}else p.status=103;if(p.status===103&&(p.gzhead.hcrc?(p.pending+2>p.pending_buf_size&&O(t),p.pending+2<=p.pending_buf_size&&(Q(p,255&t.adler),Q(p,t.adler>>8&255),t.adler=0,p.status=T)):p.status=T),p.pending!==0){if(O(t),t.avail_out===0)return p.last_flush=-1,o}else if(t.avail_in===0&&Z(V)<=Z(I)&&V!==b)return it(t,-5);if(p.status===666&&t.avail_in!==0)return it(t,-5);if(t.avail_in!==0||p.lookahead!==0||V!==g&&p.status!==666){var N=p.strategy===2?function(z,W){for(var X;;){if(z.lookahead===0&&(dt(z),z.lookahead===0)){if(W===g)return e;break}if(z.match_length=0,X=r._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,X&&(A(z,!1),z.strm.avail_out===0))return e}return z.insert=0,W===b?(A(z,!0),z.strm.avail_out===0?rt:L):z.last_lit&&(A(z,!1),z.strm.avail_out===0)?e:$}(p,V):p.strategy===3?function(z,W){for(var X,K,J,ct,st=z.window;;){if(z.lookahead<=G){if(dt(z),z.lookahead<=G&&W===g)return e;if(z.lookahead===0)break}if(z.match_length=0,z.lookahead>=B&&0<z.strstart&&(K=st[J=z.strstart-1])===st[++J]&&K===st[++J]&&K===st[++J]){ct=z.strstart+G;do;while(K===st[++J]&&K===st[++J]&&K===st[++J]&&K===st[++J]&&K===st[++J]&&K===st[++J]&&K===st[++J]&&K===st[++J]&&J<ct);z.match_length=G-(ct-J),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=B?(X=r._tr_tally(z,1,z.match_length-B),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(X=r._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),X&&(A(z,!1),z.strm.avail_out===0))return e}return z.insert=0,W===b?(A(z,!0),z.strm.avail_out===0?rt:L):z.last_lit&&(A(z,!1),z.strm.avail_out===0)?e:$}(p,V):i[p.level].func(p,V);if(N!==rt&&N!==L||(p.status=666),N===e||N===rt)return t.avail_out===0&&(p.last_flush=-1),o;if(N===$&&(V===1?r._tr_align(p):V!==5&&(r._tr_stored_block(p,0,0,!1),V===3&&(et(p.head),p.lookahead===0&&(p.strstart=0,p.block_start=0,p.insert=0))),O(t),t.avail_out===0))return p.last_flush=-1,o}return V!==b?o:p.wrap<=0?1:(p.wrap===2?(Q(p,255&t.adler),Q(p,t.adler>>8&255),Q(p,t.adler>>16&255),Q(p,t.adler>>24&255),Q(p,255&t.total_in),Q(p,t.total_in>>8&255),Q(p,t.total_in>>16&255),Q(p,t.total_in>>24&255)):(Y(p,t.adler>>>16),Y(p,65535&t.adler)),O(t),0<p.wrap&&(p.wrap=-p.wrap),p.pending!==0?o:1)},d.deflateEnd=function(t){var V;return t&&t.state?(V=t.state.status)!==w&&V!==69&&V!==73&&V!==91&&V!==103&&V!==T&&V!==666?it(t,_):(t.state=null,V===T?it(t,-3):o):_},d.deflateSetDictionary=function(t,V){var I,p,u,S,U,N,z,W,X=V.length;if(!t||!t.state||(S=(I=t.state).wrap)===2||S===1&&I.status!==w||I.lookahead)return _;for(S===1&&(t.adler=l(t.adler,V,X,0)),I.wrap=0,X>=I.w_size&&(S===0&&(et(I.head),I.strstart=0,I.block_start=0,I.insert=0),W=new a.Buf8(I.w_size),a.arraySet(W,V,X-I.w_size,I.w_size,0),V=W,X=I.w_size),U=t.avail_in,N=t.next_in,z=t.input,t.avail_in=X,t.next_in=0,t.input=V,dt(I);I.lookahead>=B;){for(p=I.strstart,u=I.lookahead-(B-1);I.ins_h=(I.ins_h<<I.hash_shift^I.window[p+B-1])&I.hash_mask,I.prev[p&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=p,p++,--u;);I.strstart=p,I.lookahead=B-1,dt(I)}return I.strstart+=I.lookahead,I.block_start=I.strstart,I.insert=I.lookahead,I.lookahead=0,I.match_length=I.prev_length=B-1,I.match_available=0,t.next_in=N,t.input=z,t.avail_in=U,I.wrap=S,o},d.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,E,d){E.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,E,d){E.exports=function(i,a){var r,l,m,y,g,b,o,_,s,f,c,h,v,D,C,P,R,j,B,G,tt,w,T,e,$;r=i.state,l=i.next_in,e=i.input,m=l+(i.avail_in-5),y=i.next_out,$=i.output,g=y-(a-i.avail_out),b=y+(i.avail_out-257),o=r.dmax,_=r.wsize,s=r.whave,f=r.wnext,c=r.window,h=r.hold,v=r.bits,D=r.lencode,C=r.distcode,P=(1<<r.lenbits)-1,R=(1<<r.distbits)-1;t:do{v<15&&(h+=e[l++]<<v,v+=8,h+=e[l++]<<v,v+=8),j=D[h&P];e:for(;;){if(h>>>=B=j>>>24,v-=B,(B=j>>>16&255)===0)$[y++]=65535&j;else{if(!(16&B)){if((64&B)==0){j=D[(65535&j)+(h&(1<<B)-1)];continue e}if(32&B){r.mode=12;break t}i.msg="invalid literal/length code",r.mode=30;break t}G=65535&j,(B&=15)&&(v<B&&(h+=e[l++]<<v,v+=8),G+=h&(1<<B)-1,h>>>=B,v-=B),v<15&&(h+=e[l++]<<v,v+=8,h+=e[l++]<<v,v+=8),j=C[h&R];r:for(;;){if(h>>>=B=j>>>24,v-=B,!(16&(B=j>>>16&255))){if((64&B)==0){j=C[(65535&j)+(h&(1<<B)-1)];continue r}i.msg="invalid distance code",r.mode=30;break t}if(tt=65535&j,v<(B&=15)&&(h+=e[l++]<<v,(v+=8)<B&&(h+=e[l++]<<v,v+=8)),o<(tt+=h&(1<<B)-1)){i.msg="invalid distance too far back",r.mode=30;break t}if(h>>>=B,v-=B,(B=y-g)<tt){if(s<(B=tt-B)&&r.sane){i.msg="invalid distance too far back",r.mode=30;break t}if(T=c,(w=0)===f){if(w+=_-B,B<G){for(G-=B;$[y++]=c[w++],--B;);w=y-tt,T=$}}else if(f<B){if(w+=_+f-B,(B-=f)<G){for(G-=B;$[y++]=c[w++],--B;);if(w=0,f<G){for(G-=B=f;$[y++]=c[w++],--B;);w=y-tt,T=$}}}else if(w+=f-B,B<G){for(G-=B;$[y++]=c[w++],--B;);w=y-tt,T=$}for(;2<G;)$[y++]=T[w++],$[y++]=T[w++],$[y++]=T[w++],G-=3;G&&($[y++]=T[w++],1<G&&($[y++]=T[w++]))}else{for(w=y-tt;$[y++]=$[w++],$[y++]=$[w++],$[y++]=$[w++],2<(G-=3););G&&($[y++]=$[w++],1<G&&($[y++]=$[w++]))}break}}break}}while(l<m&&y<b);l-=G=v>>3,h&=(1<<(v-=G<<3))-1,i.next_in=l,i.next_out=y,i.avail_in=l<m?m-l+5:5-(l-m),i.avail_out=y<b?b-y+257:257-(y-b),r.hold=h,r.bits=v}},{}],49:[function(n,E,d){var i=n("../utils/common"),a=n("./adler32"),r=n("./crc32"),l=n("./inffast"),m=n("./inftrees"),y=1,g=2,b=0,o=-2,_=1,s=852,f=592;function c(w){return(w>>>24&255)+(w>>>8&65280)+((65280&w)<<8)+((255&w)<<24)}function h(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(w){var T;return w&&w.state?(T=w.state,w.total_in=w.total_out=T.total=0,w.msg="",T.wrap&&(w.adler=1&T.wrap),T.mode=_,T.last=0,T.havedict=0,T.dmax=32768,T.head=null,T.hold=0,T.bits=0,T.lencode=T.lendyn=new i.Buf32(s),T.distcode=T.distdyn=new i.Buf32(f),T.sane=1,T.back=-1,b):o}function D(w){var T;return w&&w.state?((T=w.state).wsize=0,T.whave=0,T.wnext=0,v(w)):o}function C(w,T){var e,$;return w&&w.state?($=w.state,T<0?(e=0,T=-T):(e=1+(T>>4),T<48&&(T&=15)),T&&(T<8||15<T)?o:($.window!==null&&$.wbits!==T&&($.window=null),$.wrap=e,$.wbits=T,D(w))):o}function P(w,T){var e,$;return w?($=new h,(w.state=$).window=null,(e=C(w,T))!==b&&(w.state=null),e):o}var R,j,B=!0;function G(w){if(B){var T;for(R=new i.Buf32(512),j=new i.Buf32(32),T=0;T<144;)w.lens[T++]=8;for(;T<256;)w.lens[T++]=9;for(;T<280;)w.lens[T++]=7;for(;T<288;)w.lens[T++]=8;for(m(y,w.lens,0,288,R,0,w.work,{bits:9}),T=0;T<32;)w.lens[T++]=5;m(g,w.lens,0,32,j,0,w.work,{bits:5}),B=!1}w.lencode=R,w.lenbits=9,w.distcode=j,w.distbits=5}function tt(w,T,e,$){var rt,L=w.state;return L.window===null&&(L.wsize=1<<L.wbits,L.wnext=0,L.whave=0,L.window=new i.Buf8(L.wsize)),$>=L.wsize?(i.arraySet(L.window,T,e-L.wsize,L.wsize,0),L.wnext=0,L.whave=L.wsize):($<(rt=L.wsize-L.wnext)&&(rt=$),i.arraySet(L.window,T,e-$,rt,L.wnext),($-=rt)?(i.arraySet(L.window,T,e-$,$,0),L.wnext=$,L.whave=L.wsize):(L.wnext+=rt,L.wnext===L.wsize&&(L.wnext=0),L.whave<L.wsize&&(L.whave+=rt))),0}d.inflateReset=D,d.inflateReset2=C,d.inflateResetKeep=v,d.inflateInit=function(w){return P(w,15)},d.inflateInit2=P,d.inflate=function(w,T){var e,$,rt,L,it,Z,et,O,A,Q,Y,q,dt,_t,nt,ot,pt,ut,kt,vt,t,V,I,p,u=0,S=new i.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!w||!w.state||!w.output||!w.input&&w.avail_in!==0)return o;(e=w.state).mode===12&&(e.mode=13),it=w.next_out,rt=w.output,et=w.avail_out,L=w.next_in,$=w.input,Z=w.avail_in,O=e.hold,A=e.bits,Q=Z,Y=et,V=b;t:for(;;)switch(e.mode){case _:if(e.wrap===0){e.mode=13;break}for(;A<16;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}if(2&e.wrap&&O===35615){S[e.check=0]=255&O,S[1]=O>>>8&255,e.check=r(e.check,S,2,0),A=O=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&O)<<8)+(O>>8))%31){w.msg="incorrect header check",e.mode=30;break}if((15&O)!=8){w.msg="unknown compression method",e.mode=30;break}if(A-=4,t=8+(15&(O>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){w.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,w.adler=e.check=1,e.mode=512&O?10:12,A=O=0;break;case 2:for(;A<16;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}if(e.flags=O,(255&e.flags)!=8){w.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){w.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=O>>8&1),512&e.flags&&(S[0]=255&O,S[1]=O>>>8&255,e.check=r(e.check,S,2,0)),A=O=0,e.mode=3;case 3:for(;A<32;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}e.head&&(e.head.time=O),512&e.flags&&(S[0]=255&O,S[1]=O>>>8&255,S[2]=O>>>16&255,S[3]=O>>>24&255,e.check=r(e.check,S,4,0)),A=O=0,e.mode=4;case 4:for(;A<16;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}e.head&&(e.head.xflags=255&O,e.head.os=O>>8),512&e.flags&&(S[0]=255&O,S[1]=O>>>8&255,e.check=r(e.check,S,2,0)),A=O=0,e.mode=5;case 5:if(1024&e.flags){for(;A<16;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}e.length=O,e.head&&(e.head.extra_len=O),512&e.flags&&(S[0]=255&O,S[1]=O>>>8&255,e.check=r(e.check,S,2,0)),A=O=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(Z<(q=e.length)&&(q=Z),q&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),i.arraySet(e.head.extra,$,L,q,t)),512&e.flags&&(e.check=r(e.check,$,q,L)),Z-=q,L+=q,e.length-=q),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(Z===0)break t;for(q=0;t=$[L+q++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&q<Z;);if(512&e.flags&&(e.check=r(e.check,$,q,L)),Z-=q,L+=q,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(Z===0)break t;for(q=0;t=$[L+q++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&q<Z;);if(512&e.flags&&(e.check=r(e.check,$,q,L)),Z-=q,L+=q,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;A<16;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}if(O!==(65535&e.check)){w.msg="header crc mismatch",e.mode=30;break}A=O=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),w.adler=e.check=0,e.mode=12;break;case 10:for(;A<32;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}w.adler=e.check=c(O),A=O=0,e.mode=11;case 11:if(e.havedict===0)return w.next_out=it,w.avail_out=et,w.next_in=L,w.avail_in=Z,e.hold=O,e.bits=A,2;w.adler=e.check=1,e.mode=12;case 12:if(T===5||T===6)break t;case 13:if(e.last){O>>>=7&A,A-=7&A,e.mode=27;break}for(;A<3;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}switch(e.last=1&O,A-=1,3&(O>>>=1)){case 0:e.mode=14;break;case 1:if(G(e),e.mode=20,T!==6)break;O>>>=2,A-=2;break t;case 2:e.mode=17;break;case 3:w.msg="invalid block type",e.mode=30}O>>>=2,A-=2;break;case 14:for(O>>>=7&A,A-=7&A;A<32;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}if((65535&O)!=(O>>>16^65535)){w.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&O,A=O=0,e.mode=15,T===6)break t;case 15:e.mode=16;case 16:if(q=e.length){if(Z<q&&(q=Z),et<q&&(q=et),q===0)break t;i.arraySet(rt,$,L,q,it),Z-=q,L+=q,et-=q,it+=q,e.length-=q;break}e.mode=12;break;case 17:for(;A<14;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}if(e.nlen=257+(31&O),O>>>=5,A-=5,e.ndist=1+(31&O),O>>>=5,A-=5,e.ncode=4+(15&O),O>>>=4,A-=4,286<e.nlen||30<e.ndist){w.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;A<3;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}e.lens[U[e.have++]]=7&O,O>>>=3,A-=3}for(;e.have<19;)e.lens[U[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,I={bits:e.lenbits},V=m(0,e.lens,0,19,e.lencode,0,e.work,I),e.lenbits=I.bits,V){w.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;ot=(u=e.lencode[O&(1<<e.lenbits)-1])>>>16&255,pt=65535&u,!((nt=u>>>24)<=A);){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}if(pt<16)O>>>=nt,A-=nt,e.lens[e.have++]=pt;else{if(pt===16){for(p=nt+2;A<p;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}if(O>>>=nt,A-=nt,e.have===0){w.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],q=3+(3&O),O>>>=2,A-=2}else if(pt===17){for(p=nt+3;A<p;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}A-=nt,t=0,q=3+(7&(O>>>=nt)),O>>>=3,A-=3}else{for(p=nt+7;A<p;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}A-=nt,t=0,q=11+(127&(O>>>=nt)),O>>>=7,A-=7}if(e.have+q>e.nlen+e.ndist){w.msg="invalid bit length repeat",e.mode=30;break}for(;q--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){w.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,I={bits:e.lenbits},V=m(y,e.lens,0,e.nlen,e.lencode,0,e.work,I),e.lenbits=I.bits,V){w.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,I={bits:e.distbits},V=m(g,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,I),e.distbits=I.bits,V){w.msg="invalid distances set",e.mode=30;break}if(e.mode=20,T===6)break t;case 20:e.mode=21;case 21:if(6<=Z&&258<=et){w.next_out=it,w.avail_out=et,w.next_in=L,w.avail_in=Z,e.hold=O,e.bits=A,l(w,Y),it=w.next_out,rt=w.output,et=w.avail_out,L=w.next_in,$=w.input,Z=w.avail_in,O=e.hold,A=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;ot=(u=e.lencode[O&(1<<e.lenbits)-1])>>>16&255,pt=65535&u,!((nt=u>>>24)<=A);){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}if(ot&&(240&ot)==0){for(ut=nt,kt=ot,vt=pt;ot=(u=e.lencode[vt+((O&(1<<ut+kt)-1)>>ut)])>>>16&255,pt=65535&u,!(ut+(nt=u>>>24)<=A);){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}O>>>=ut,A-=ut,e.back+=ut}if(O>>>=nt,A-=nt,e.back+=nt,e.length=pt,ot===0){e.mode=26;break}if(32&ot){e.back=-1,e.mode=12;break}if(64&ot){w.msg="invalid literal/length code",e.mode=30;break}e.extra=15&ot,e.mode=22;case 22:if(e.extra){for(p=e.extra;A<p;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}e.length+=O&(1<<e.extra)-1,O>>>=e.extra,A-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;ot=(u=e.distcode[O&(1<<e.distbits)-1])>>>16&255,pt=65535&u,!((nt=u>>>24)<=A);){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}if((240&ot)==0){for(ut=nt,kt=ot,vt=pt;ot=(u=e.distcode[vt+((O&(1<<ut+kt)-1)>>ut)])>>>16&255,pt=65535&u,!(ut+(nt=u>>>24)<=A);){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}O>>>=ut,A-=ut,e.back+=ut}if(O>>>=nt,A-=nt,e.back+=nt,64&ot){w.msg="invalid distance code",e.mode=30;break}e.offset=pt,e.extra=15&ot,e.mode=24;case 24:if(e.extra){for(p=e.extra;A<p;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}e.offset+=O&(1<<e.extra)-1,O>>>=e.extra,A-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){w.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(et===0)break t;if(q=Y-et,e.offset>q){if((q=e.offset-q)>e.whave&&e.sane){w.msg="invalid distance too far back",e.mode=30;break}dt=q>e.wnext?(q-=e.wnext,e.wsize-q):e.wnext-q,q>e.length&&(q=e.length),_t=e.window}else _t=rt,dt=it-e.offset,q=e.length;for(et<q&&(q=et),et-=q,e.length-=q;rt[it++]=_t[dt++],--q;);e.length===0&&(e.mode=21);break;case 26:if(et===0)break t;rt[it++]=e.length,et--,e.mode=21;break;case 27:if(e.wrap){for(;A<32;){if(Z===0)break t;Z--,O|=$[L++]<<A,A+=8}if(Y-=et,w.total_out+=Y,e.total+=Y,Y&&(w.adler=e.check=e.flags?r(e.check,rt,Y,it-Y):a(e.check,rt,Y,it-Y)),Y=et,(e.flags?O:c(O))!==e.check){w.msg="incorrect data check",e.mode=30;break}A=O=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;A<32;){if(Z===0)break t;Z--,O+=$[L++]<<A,A+=8}if(O!==(4294967295&e.total)){w.msg="incorrect length check",e.mode=30;break}A=O=0}e.mode=29;case 29:V=1;break t;case 30:V=-3;break t;case 31:return-4;case 32:default:return o}return w.next_out=it,w.avail_out=et,w.next_in=L,w.avail_in=Z,e.hold=O,e.bits=A,(e.wsize||Y!==w.avail_out&&e.mode<30&&(e.mode<27||T!==4))&&tt(w,w.output,w.next_out,Y-w.avail_out)?(e.mode=31,-4):(Q-=w.avail_in,Y-=w.avail_out,w.total_in+=Q,w.total_out+=Y,e.total+=Y,e.wrap&&Y&&(w.adler=e.check=e.flags?r(e.check,rt,Y,w.next_out-Y):a(e.check,rt,Y,w.next_out-Y)),w.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(Q==0&&Y===0||T===4)&&V===b&&(V=-5),V)},d.inflateEnd=function(w){if(!w||!w.state)return o;var T=w.state;return T.window&&(T.window=null),w.state=null,b},d.inflateGetHeader=function(w,T){var e;return w&&w.state?(2&(e=w.state).wrap)==0?o:((e.head=T).done=!1,b):o},d.inflateSetDictionary=function(w,T){var e,$=T.length;return w&&w.state?(e=w.state).wrap!==0&&e.mode!==11?o:e.mode===11&&a(1,T,$,0)!==e.check?-3:tt(w,T,$,$)?(e.mode=31,-4):(e.havedict=1,b):o},d.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,E,d){var i=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];E.exports=function(y,g,b,o,_,s,f,c){var h,v,D,C,P,R,j,B,G,tt=c.bits,w=0,T=0,e=0,$=0,rt=0,L=0,it=0,Z=0,et=0,O=0,A=null,Q=0,Y=new i.Buf16(16),q=new i.Buf16(16),dt=null,_t=0;for(w=0;w<=15;w++)Y[w]=0;for(T=0;T<o;T++)Y[g[b+T]]++;for(rt=tt,$=15;1<=$&&Y[$]===0;$--);if($<rt&&(rt=$),$===0)return _[s++]=20971520,_[s++]=20971520,c.bits=1,0;for(e=1;e<$&&Y[e]===0;e++);for(rt<e&&(rt=e),w=Z=1;w<=15;w++)if(Z<<=1,(Z-=Y[w])<0)return-1;if(0<Z&&(y===0||$!==1))return-1;for(q[1]=0,w=1;w<15;w++)q[w+1]=q[w]+Y[w];for(T=0;T<o;T++)g[b+T]!==0&&(f[q[g[b+T]]++]=T);if(R=y===0?(A=dt=f,19):y===1?(A=a,Q-=257,dt=r,_t-=257,256):(A=l,dt=m,-1),w=e,P=s,it=T=O=0,D=-1,C=(et=1<<(L=rt))-1,y===1&&852<et||y===2&&592<et)return 1;for(;;){for(j=w-it,G=f[T]<R?(B=0,f[T]):f[T]>R?(B=dt[_t+f[T]],A[Q+f[T]]):(B=96,0),h=1<<w-it,e=v=1<<L;_[P+(O>>it)+(v-=h)]=j<<24|B<<16|G|0,v!==0;);for(h=1<<w-1;O&h;)h>>=1;if(h!==0?(O&=h-1,O+=h):O=0,T++,--Y[w]==0){if(w===$)break;w=g[b+f[T]]}if(rt<w&&(O&C)!==D){for(it===0&&(it=rt),P+=e,Z=1<<(L=w-it);L+it<$&&!((Z-=Y[L+it])<=0);)L++,Z<<=1;if(et+=1<<L,y===1&&852<et||y===2&&592<et)return 1;_[D=O&C]=rt<<24|L<<16|P-s|0}}return O!==0&&(_[P+O]=w-it<<24|64<<16|0),c.bits=rt,0}},{"../utils/common":41}],51:[function(n,E,d){E.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,E,d){var i=n("../utils/common"),a=0,r=1;function l(u){for(var S=u.length;0<=--S;)u[S]=0}var m=0,y=29,g=256,b=g+1+y,o=30,_=19,s=2*b+1,f=15,c=16,h=7,v=256,D=16,C=17,P=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],tt=new Array(2*(b+2));l(tt);var w=new Array(2*o);l(w);var T=new Array(512);l(T);var e=new Array(256);l(e);var $=new Array(y);l($);var rt,L,it,Z=new Array(o);function et(u,S,U,N,z){this.static_tree=u,this.extra_bits=S,this.extra_base=U,this.elems=N,this.max_length=z,this.has_stree=u&&u.length}function O(u,S){this.dyn_tree=u,this.max_code=0,this.stat_desc=S}function A(u){return u<256?T[u]:T[256+(u>>>7)]}function Q(u,S){u.pending_buf[u.pending++]=255&S,u.pending_buf[u.pending++]=S>>>8&255}function Y(u,S,U){u.bi_valid>c-U?(u.bi_buf|=S<<u.bi_valid&65535,Q(u,u.bi_buf),u.bi_buf=S>>c-u.bi_valid,u.bi_valid+=U-c):(u.bi_buf|=S<<u.bi_valid&65535,u.bi_valid+=U)}function q(u,S,U){Y(u,U[2*S],U[2*S+1])}function dt(u,S){for(var U=0;U|=1&u,u>>>=1,U<<=1,0<--S;);return U>>>1}function _t(u,S,U){var N,z,W=new Array(f+1),X=0;for(N=1;N<=f;N++)W[N]=X=X+U[N-1]<<1;for(z=0;z<=S;z++){var K=u[2*z+1];K!==0&&(u[2*z]=dt(W[K]++,K))}}function nt(u){var S;for(S=0;S<b;S++)u.dyn_ltree[2*S]=0;for(S=0;S<o;S++)u.dyn_dtree[2*S]=0;for(S=0;S<_;S++)u.bl_tree[2*S]=0;u.dyn_ltree[2*v]=1,u.opt_len=u.static_len=0,u.last_lit=u.matches=0}function ot(u){8<u.bi_valid?Q(u,u.bi_buf):0<u.bi_valid&&(u.pending_buf[u.pending++]=u.bi_buf),u.bi_buf=0,u.bi_valid=0}function pt(u,S,U,N){var z=2*S,W=2*U;return u[z]<u[W]||u[z]===u[W]&&N[S]<=N[U]}function ut(u,S,U){for(var N=u.heap[U],z=U<<1;z<=u.heap_len&&(z<u.heap_len&&pt(S,u.heap[z+1],u.heap[z],u.depth)&&z++,!pt(S,N,u.heap[z],u.depth));)u.heap[U]=u.heap[z],U=z,z<<=1;u.heap[U]=N}function kt(u,S,U){var N,z,W,X,K=0;if(u.last_lit!==0)for(;N=u.pending_buf[u.d_buf+2*K]<<8|u.pending_buf[u.d_buf+2*K+1],z=u.pending_buf[u.l_buf+K],K++,N===0?q(u,z,S):(q(u,(W=e[z])+g+1,S),(X=R[W])!==0&&Y(u,z-=$[W],X),q(u,W=A(--N),U),(X=j[W])!==0&&Y(u,N-=Z[W],X)),K<u.last_lit;);q(u,v,S)}function vt(u,S){var U,N,z,W=S.dyn_tree,X=S.stat_desc.static_tree,K=S.stat_desc.has_stree,J=S.stat_desc.elems,ct=-1;for(u.heap_len=0,u.heap_max=s,U=0;U<J;U++)W[2*U]!==0?(u.heap[++u.heap_len]=ct=U,u.depth[U]=0):W[2*U+1]=0;for(;u.heap_len<2;)W[2*(z=u.heap[++u.heap_len]=ct<2?++ct:0)]=1,u.depth[z]=0,u.opt_len--,K&&(u.static_len-=X[2*z+1]);for(S.max_code=ct,U=u.heap_len>>1;1<=U;U--)ut(u,W,U);for(z=J;U=u.heap[1],u.heap[1]=u.heap[u.heap_len--],ut(u,W,1),N=u.heap[1],u.heap[--u.heap_max]=U,u.heap[--u.heap_max]=N,W[2*z]=W[2*U]+W[2*N],u.depth[z]=(u.depth[U]>=u.depth[N]?u.depth[U]:u.depth[N])+1,W[2*U+1]=W[2*N+1]=z,u.heap[1]=z++,ut(u,W,1),2<=u.heap_len;);u.heap[--u.heap_max]=u.heap[1],function(st,wt){var zt,St,At,ht,Ot,Tt,xt=wt.dyn_tree,Ut=wt.max_code,Kt=wt.stat_desc.static_tree,Gt=wt.stat_desc.has_stree,qt=wt.stat_desc.extra_bits,Nt=wt.stat_desc.extra_base,Et=wt.stat_desc.max_length,It=0;for(ht=0;ht<=f;ht++)st.bl_count[ht]=0;for(xt[2*st.heap[st.heap_max]+1]=0,zt=st.heap_max+1;zt<s;zt++)Et<(ht=xt[2*xt[2*(St=st.heap[zt])+1]+1]+1)&&(ht=Et,It++),xt[2*St+1]=ht,Ut<St||(st.bl_count[ht]++,Ot=0,Nt<=St&&(Ot=qt[St-Nt]),Tt=xt[2*St],st.opt_len+=Tt*(ht+Ot),Gt&&(st.static_len+=Tt*(Kt[2*St+1]+Ot)));if(It!==0){do{for(ht=Et-1;st.bl_count[ht]===0;)ht--;st.bl_count[ht]--,st.bl_count[ht+1]+=2,st.bl_count[Et]--,It-=2}while(0<It);for(ht=Et;ht!==0;ht--)for(St=st.bl_count[ht];St!==0;)Ut<(At=st.heap[--zt])||(xt[2*At+1]!==ht&&(st.opt_len+=(ht-xt[2*At+1])*xt[2*At],xt[2*At+1]=ht),St--)}}(u,S),_t(W,ct,u.bl_count)}function t(u,S,U){var N,z,W=-1,X=S[1],K=0,J=7,ct=4;for(X===0&&(J=138,ct=3),S[2*(U+1)+1]=65535,N=0;N<=U;N++)z=X,X=S[2*(N+1)+1],++K<J&&z===X||(K<ct?u.bl_tree[2*z]+=K:z!==0?(z!==W&&u.bl_tree[2*z]++,u.bl_tree[2*D]++):K<=10?u.bl_tree[2*C]++:u.bl_tree[2*P]++,W=z,ct=(K=0)===X?(J=138,3):z===X?(J=6,3):(J=7,4))}function V(u,S,U){var N,z,W=-1,X=S[1],K=0,J=7,ct=4;for(X===0&&(J=138,ct=3),N=0;N<=U;N++)if(z=X,X=S[2*(N+1)+1],!(++K<J&&z===X)){if(K<ct)for(;q(u,z,u.bl_tree),--K!=0;);else z!==0?(z!==W&&(q(u,z,u.bl_tree),K--),q(u,D,u.bl_tree),Y(u,K-3,2)):K<=10?(q(u,C,u.bl_tree),Y(u,K-3,3)):(q(u,P,u.bl_tree),Y(u,K-11,7));W=z,ct=(K=0)===X?(J=138,3):z===X?(J=6,3):(J=7,4)}}l(Z);var I=!1;function p(u,S,U,N){Y(u,(m<<1)+(N?1:0),3),function(z,W,X,K){ot(z),K&&(Q(z,X),Q(z,~X)),i.arraySet(z.pending_buf,z.window,W,X,z.pending),z.pending+=X}(u,S,U,!0)}d._tr_init=function(u){I||(function(){var S,U,N,z,W,X=new Array(f+1);for(z=N=0;z<y-1;z++)for($[z]=N,S=0;S<1<<R[z];S++)e[N++]=z;for(e[N-1]=z,z=W=0;z<16;z++)for(Z[z]=W,S=0;S<1<<j[z];S++)T[W++]=z;for(W>>=7;z<o;z++)for(Z[z]=W<<7,S=0;S<1<<j[z]-7;S++)T[256+W++]=z;for(U=0;U<=f;U++)X[U]=0;for(S=0;S<=143;)tt[2*S+1]=8,S++,X[8]++;for(;S<=255;)tt[2*S+1]=9,S++,X[9]++;for(;S<=279;)tt[2*S+1]=7,S++,X[7]++;for(;S<=287;)tt[2*S+1]=8,S++,X[8]++;for(_t(tt,b+1,X),S=0;S<o;S++)w[2*S+1]=5,w[2*S]=dt(S,5);rt=new et(tt,R,g+1,b,f),L=new et(w,j,0,o,f),it=new et(new Array(0),B,0,_,h)}(),I=!0),u.l_desc=new O(u.dyn_ltree,rt),u.d_desc=new O(u.dyn_dtree,L),u.bl_desc=new O(u.bl_tree,it),u.bi_buf=0,u.bi_valid=0,nt(u)},d._tr_stored_block=p,d._tr_flush_block=function(u,S,U,N){var z,W,X=0;0<u.level?(u.strm.data_type===2&&(u.strm.data_type=function(K){var J,ct=4093624447;for(J=0;J<=31;J++,ct>>>=1)if(1&ct&&K.dyn_ltree[2*J]!==0)return a;if(K.dyn_ltree[18]!==0||K.dyn_ltree[20]!==0||K.dyn_ltree[26]!==0)return r;for(J=32;J<g;J++)if(K.dyn_ltree[2*J]!==0)return r;return a}(u)),vt(u,u.l_desc),vt(u,u.d_desc),X=function(K){var J;for(t(K,K.dyn_ltree,K.l_desc.max_code),t(K,K.dyn_dtree,K.d_desc.max_code),vt(K,K.bl_desc),J=_-1;3<=J&&K.bl_tree[2*G[J]+1]===0;J--);return K.opt_len+=3*(J+1)+5+5+4,J}(u),z=u.opt_len+3+7>>>3,(W=u.static_len+3+7>>>3)<=z&&(z=W)):z=W=U+5,U+4<=z&&S!==-1?p(u,S,U,N):u.strategy===4||W===z?(Y(u,2+(N?1:0),3),kt(u,tt,w)):(Y(u,4+(N?1:0),3),function(K,J,ct,st){var wt;for(Y(K,J-257,5),Y(K,ct-1,5),Y(K,st-4,4),wt=0;wt<st;wt++)Y(K,K.bl_tree[2*G[wt]+1],3);V(K,K.dyn_ltree,J-1),V(K,K.dyn_dtree,ct-1)}(u,u.l_desc.max_code+1,u.d_desc.max_code+1,X+1),kt(u,u.dyn_ltree,u.dyn_dtree)),nt(u),N&&ot(u)},d._tr_tally=function(u,S,U){return u.pending_buf[u.d_buf+2*u.last_lit]=S>>>8&255,u.pending_buf[u.d_buf+2*u.last_lit+1]=255&S,u.pending_buf[u.l_buf+u.last_lit]=255&U,u.last_lit++,S===0?u.dyn_ltree[2*U]++:(u.matches++,S--,u.dyn_ltree[2*(e[U]+g+1)]++,u.dyn_dtree[2*A(S)]++),u.last_lit===u.lit_bufsize-1},d._tr_align=function(u){Y(u,2,3),q(u,v,tt),function(S){S.bi_valid===16?(Q(S,S.bi_buf),S.bi_buf=0,S.bi_valid=0):8<=S.bi_valid&&(S.pending_buf[S.pending++]=255&S.bi_buf,S.bi_buf>>=8,S.bi_valid-=8)}(u)}},{"../utils/common":41}],53:[function(n,E,d){E.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,E,d){(function(i){(function(a,r){if(!a.setImmediate){var l,m,y,g,b=1,o={},_=!1,s=a.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(a);f=f&&f.setTimeout?f:a,l={}.toString.call(a.process)==="[object process]"?function(D){process.nextTick(function(){h(D)})}:function(){if(a.postMessage&&!a.importScripts){var D=!0,C=a.onmessage;return a.onmessage=function(){D=!1},a.postMessage("","*"),a.onmessage=C,D}}()?(g="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",v,!1):a.attachEvent("onmessage",v),function(D){a.postMessage(g+D,"*")}):a.MessageChannel?((y=new MessageChannel).port1.onmessage=function(D){h(D.data)},function(D){y.port2.postMessage(D)}):s&&"onreadystatechange"in s.createElement("script")?(m=s.documentElement,function(D){var C=s.createElement("script");C.onreadystatechange=function(){h(D),C.onreadystatechange=null,m.removeChild(C),C=null},m.appendChild(C)}):function(D){setTimeout(h,0,D)},f.setImmediate=function(D){typeof D!="function"&&(D=new Function(""+D));for(var C=new Array(arguments.length-1),P=0;P<C.length;P++)C[P]=arguments[P+1];var R={callback:D,args:C};return o[b]=R,l(b),b++},f.clearImmediate=c}function c(D){delete o[D]}function h(D){if(_)setTimeout(h,0,D);else{var C=o[D];if(C){_=!0;try{(function(P){var R=P.callback,j=P.args;switch(j.length){case 0:R();break;case 1:R(j[0]);break;case 2:R(j[0],j[1]);break;case 3:R(j[0],j[1],j[2]);break;default:R.apply(r,j)}})(C)}finally{c(D),_=!1}}}}function v(D){D.source===a&&typeof D.data=="string"&&D.data.indexOf(g)===0&&h(+D.data.slice(g.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Bt<"u"?Bt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ht);const Ye=Ht.exports;const Xe={name:"VerifyStep",props:{form:{type:Object}},emits:["on-success","on-close"],components:{RemoteHost:Pt,CodeHighlight:Wt},data(){return{hasInit:!1,host:"",deployForm:{deploy_host:null,keyDeployPath:"",pemDeployPath:"",reloadcmd:"service nginx force-reload"},rules:{deploy_host:[{message:"\u670D\u52A1\u5668\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],keyDeployPath:[{message:"\u79C1\u94A5\u90E8\u7F72\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],pemDeployPath:[{message:"\u516C\u94A5\u90E8\u7F72\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],reloadcmd:[{message:"\u91CD\u542F\u547D\u4EE4\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}]}}},computed:{domain_list(){return this.form.domains.join(" ")},nginxConfig(){return`server {
    listen 443 ssl;
    server_name ${this.domain_list};

    ssl_certificate ${this.deployForm.keyDeployPath};
    ssl_certificate_key ${this.deployForm.pemDeployPath};  
}`}},methods:{async getData(){console.log(this.form),this.deployForm.keyDeployPath=this.form.deploy_key_file||`/path/to/${this.form.domains[0]}.key`,this.deployForm.pemDeployPath=this.form.deploy_fullchain_file||`/path/to/${this.form.domains[0]}.pem`,this.deployForm.reloadcmd=this.form.deploy_reloadcmd||this.reloadcmd,this.deployForm.deploy_host=this.form.deploy_host,this.deployForm.deploy_host||await this.getDomainHost(),this.hasInit=!0},async getDomainHost(){let x={domain:this.form.domains[0]};const k=await this.$http.getDomainHost(x);k.code==0?(this.host=k.data.host,this.host&&await this.getHost()):this.$msg.error(k.msg)},async getHost(){let x={keyword:this.host};const k=await this.$http.getHostList(x);k.data.list&&k.data.list.length>0&&(this.deployForm.deploy_host=k.data.list[0])},handleClose(){this.$emit("on-close")},async handleSubmit(){let x=this.$loading({fullscreen:!0}),k={issue_certificate_id:this.form.id};const n=await this.$http.renewCertificate(k);return n.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(n.msg),this.$nextTick(()=>{x.close()}),n},downloadSSLKeyFile(){console.log(JSON.stringify(this.form,null,2));let x=new Blob([this.form.ssl_certificate_key],{type:"text/plain;charset=utf-8"}),k=this.form.domains[0];Ct.saveAs(x,`${k}.key`)},async downloadSSLFile(){let x=this.form.domains[0];const k=new Ye;k.file(`${x}.pem`,this.form.ssl_certificate),k.file(`${x}.key`,this.form.ssl_certificate_key),k.generateAsync({type:"blob"}).then(function(n){Ct.saveAs(n,`${x}.zip`)})},async handleDeployVerifyFile(x){this.$refs.form.validate(k=>{if(k)this.confirmDeployVerifyFile(x);else return!1})},async confirmDeployVerifyFile(x){let k=this.$loading({fullscreen:!0}),n={issue_certificate_id:this.form.id,host_id:x.id,key_deploy_path:this.deployForm.keyDeployPath,pem_deploy_path:this.deployForm.pemDeployPath,reloadcmd:this.reloadcmd};const E=await this.$http.deployCertificateFile(n);E.code==0?(this.$msg.success("\u90E8\u7F72\u6210\u529F"),this.$emit("on-success",E.data)):this.$msg.error(E.msg),this.$nextTick(()=>{k.close()})}},created(){this.getData()}},Je={class:"mo-form-detail"},Qe={class:"text-center mt-md"};function tr(x,k,n,E,d,i){const a=M("RemoteHost"),r=M("el-form-item"),l=M("el-input"),m=M("el-form"),y=M("Download"),g=M("el-icon"),b=M("el-link"),o=M("CodeHighlight"),_=M("el-button");return at(),ft("div",null,[F(m,{ref:"form",model:d.deployForm,rules:d.rules,"label-width":"130px"},{default:H(()=>[F(r,{label:"\u670D\u52A1\u5668\u5730\u5740",prop:"deploy_host"},{default:H(()=>[d.hasInit?(at(),bt(a,{key:0,defaultKeyword:d.host,modelValue:d.deployForm.deploy_host,"onUpdate:modelValue":k[0]||(k[0]=s=>d.deployForm.deploy_host=s),onOnConfirm:i.handleDeployVerifyFile},null,8,["defaultKeyword","modelValue","onOnConfirm"])):Dt("",!0)]),_:1}),F(r,{label:"\u79C1\u94A5\u90E8\u7F72\u8DEF\u5F84",prop:"keyDeployPath"},{default:H(()=>[F(l,{modelValue:d.deployForm.keyDeployPath,"onUpdate:modelValue":k[1]||(k[1]=s=>d.deployForm.keyDeployPath=s)},null,8,["modelValue"])]),_:1}),F(r,{label:"\u516C\u94A5\u90E8\u7F72\u8DEF\u5F84",prop:"pemDeployPath"},{default:H(()=>[F(l,{modelValue:d.deployForm.pemDeployPath,"onUpdate:modelValue":k[2]||(k[2]=s=>d.deployForm.pemDeployPath=s)},null,8,["modelValue"])]),_:1}),F(r,{label:"\u91CD\u542F\u547D\u4EE4",prop:"reloadcmd"},{default:H(()=>[F(l,{modelValue:d.deployForm.reloadcmd,"onUpdate:modelValue":k[3]||(k[3]=s=>d.deployForm.reloadcmd=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),lt("div",Je,[F(m,{"label-width":"130px"},{default:H(()=>[F(r,{label:"SSL\u8BC1\u4E66",prop:"domain"},{default:H(()=>[F(b,{underline:!1,type:"primary",class:"mr-sm",onClick:i.downloadSSLFile},{default:H(()=>[F(g,null,{default:H(()=>[F(y)]),_:1}),yt("\u70B9\u51FB\u4E0B\u8F7D\uFF08.zip\uFF09")]),_:1},8,["onClick"])]),_:1}),F(r,{label:"Nginx\u914D\u7F6E",prop:"domain"},{default:H(()=>[F(o,{value:i.nginxConfig},null,8,["value"])]),_:1})]),_:1}),lt("div",Qe,[F(_,{type:"primary",onClick:i.handleClose},{default:H(()=>[yt("\u5173 \u95ED")]),_:1},8,["onClick"])])])])}const er=mt(Xe,[["render",tr],["__scopeId","data-v-af9abd80"]]),rr={name:"IssueCertificateStep",props:{row:{type:Object},defaultActiveStep:{type:Number,default:0}},components:{DataForm:Zt,VerifyStep:He,RenewStep:qe,DownloadStep:er},data(){return{host:"",hasInit:!1,activeStep:0,issue_certificate_id:null,form:{id:null,domains:[],validation:"",token:"",status:"",ssl_certificate_key:"",ssl_certificate:"",deploy_key_file:"",deploy_fullchain_file:"",deploy_reloadcmd:"",deploy_host:null},setpList:[{title:"\u586B\u5199\u57DF\u540D"},{title:"\u9A8C\u8BC1\u57DF\u540D"},{title:"\u4E0B\u8F7D\u8BC1\u4E66"}]}},computed:{},methods:{async getData(){if(!this.issue_certificate_id)return;let x={issue_certificate_id:this.issue_certificate_id};const k=await this.$http.getIssueCertificateById(x);if(!!k.ok){for(let n in this.form)this.form[n]=k.data[n];this.activeStep=this.defaultActiveStep,k.data.ssl_certificate?this.activeStep=2:k.data.status=="valid"?this.activeStep=2:k.data.id?this.activeStep=1:this.activeStep=0}},handleIssueSuccess(x){this.issue_certificate_id=x.id,this.getData()},handleVerifySuccess(){this.getData()}},created(){this.row&&(this.issue_certificate_id=this.row.id),this.getData()}},ir={class:""},nr={class:"mt-md"};function sr(x,k,n,E,d,i){const a=M("el-step"),r=M("el-steps"),l=M("DataForm"),m=M("VerifyStep"),y=M("DownloadStep");return at(),ft("div",ir,[F(r,{active:d.activeStep,"align-center":"","finish-status":"success"},{default:H(()=>[(at(!0),ft(Vt,null,Lt(d.setpList,g=>(at(),bt(a,{title:g.title},null,8,["title"]))),256))]),_:1},8,["active"]),lt("div",nr,[d.activeStep==0?(at(),bt(l,{key:0,onOnSuccess:i.handleIssueSuccess,onOnCancel:k[0]||(k[0]=g=>x.$emit("on-cancel"))},null,8,["onOnSuccess"])):d.activeStep==1?(at(),bt(m,{key:1,form:d.form,onOnSuccess:i.handleVerifySuccess},null,8,["form","onOnSuccess"])):d.activeStep==2?(at(),bt(y,{key:2,form:d.form,onOnClose:k[1]||(k[1]=g=>x.$emit("on-cancel"))},null,8,["form"])):Dt("",!0)])])}const ar=mt(rr,[["render",sr]]),or={name:"",props:{row:{type:Object,default:null},visible:{type:Boolean,default:!1}},emits:["update:visible"],components:{DataForm:Zt,IssueCertificateStep:ar},data(){return{}},computed:{dialogTitle(){return this.row?"\u7F16\u8F91":"\u7533\u8BF7SSL\u8BC1\u4E66"},dialogVisible:{get(){return this.visible},set(x){this.$emit("update:visible",x)}}},methods:{handleClose(){this.$emit("update:visible",!1)},handleOpen(){this.$emit("update:visible",!0)},handleSuccess(){this.handleClose(),this.$emit("on-success")},handleDialogClose(){this.$emit("on-close")}},created(){}};function lr(x,k,n,E,d,i){const a=M("IssueCertificateStep"),r=M("el-dialog");return at(),bt(r,{title:"\u7533\u8BF7SSL\u8BC1\u4E66",modelValue:i.dialogVisible,"onUpdate:modelValue":k[0]||(k[0]=l=>i.dialogVisible=l),width:"90%",center:"",top:"20px","append-to-body":"",onClose:i.handleDialogClose},{default:H(()=>[i.dialogVisible?(at(),bt(a,{key:0,row:n.row,onOnCancel:i.handleClose,onOnSuccess:i.handleSuccess},null,8,["row","onOnCancel","onOnSuccess"])):Dt("",!0)]),_:1},8,["modelValue","onClose"])}const Mt=mt(or,[["render",lr]]),cr={name:"",props:{row:{type:Object,default:null}},components:{},data(){return{rules:{},form:{ssl_certificate:"",ssl_certificate_key:""}}},computed:{},methods:{async getData(){let x={issue_certificate_id:this.row.id};const k=await this.$http.getIssueCertificateById(x);if(k.ok)for(let n in this.form)this.form[n]=k.data[n]},handleCancel(){this.$emit("on-cancel")},handleSubmit(){this.$refs.form.validate(x=>{if(x)this.confirmSubmit();else return!1})},async confirmSubmit(){let x=this.$loading({fullscreen:!0}),k={domains:this.form.domains.split(`
`)};this.row&&(k.id=this.row.id);const n=await this.$http.issueCertificate(k);n.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success",n.data)):this.$msg.error(n.msg),this.$nextTick(()=>{x.close()})}},created(){this.getData()}},dr={class:"text-center"};function ur(x,k,n,E,d,i){const a=M("el-input"),r=M("el-form-item"),l=M("el-form"),m=M("el-button");return at(),ft("div",null,[F(l,{ref:"form",model:d.form,rules:d.rules,"label-width":"100px"},{default:H(()=>[F(r,{label:"id",prop:"id",style:{display:"none"}},{default:H(()=>[F(a,{type:"text",modelValue:d.form.id,"onUpdate:modelValue":k[0]||(k[0]=y=>d.form.id=y),placeholder:"id"},null,8,["modelValue"])]),_:1}),F(r,{label:"\u8BC1\u4E66\u6587\u4EF6",prop:"domains"},{default:H(()=>[F(a,{type:"textarea",modelValue:d.form.ssl_certificate,"onUpdate:modelValue":k[1]||(k[1]=y=>d.form.ssl_certificate=y),rows:10,spellcheck:!1,placeholder:"\u8BF7\u8F93\u5165\u57DF\u540D\u5217\u8868\uFF0C\u6BCF\u884C\u4E00\u4E2A"},null,8,["modelValue"])]),_:1}),F(r,{label:"\u8BC1\u4E66\u79C1\u94A5",prop:"domains"},{default:H(()=>[F(a,{type:"textarea",modelValue:d.form.ssl_certificate_key,"onUpdate:modelValue":k[2]||(k[2]=y=>d.form.ssl_certificate_key=y),rows:10,spellcheck:!1,placeholder:"\u8BF7\u8F93\u5165\u57DF\u540D\u5217\u8868\uFF0C\u6BCF\u884C\u4E00\u4E2A"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),lt("div",dr,[F(m,{onClick:i.handleCancel},{default:H(()=>[yt("\u5173 \u95ED")]),_:1},8,["onClick"])])])}const hr=mt(cr,[["render",ur]]),fr={name:"",props:{row:{type:Object,default:null},visible:{type:Boolean,default:!1}},emits:["update:visible"],components:{DataForm:hr},data(){return{}},computed:{dialogTitle(){return this.row?"\u7F16\u8F91":"\u7533\u8BF7SSL\u8BC1\u4E66"},dialogVisible:{get(){return this.visible},set(x){this.$emit("update:visible",x)}}},methods:{handleClose(){this.$emit("update:visible",!1)},handleOpen(){this.$emit("update:visible",!0)},handleSuccess(){this.handleClose(),this.$emit("on-success")},handleDialogClose(){this.$emit("on-close")}},created(){}};function pr(x,k,n,E,d,i){const a=M("DataForm"),r=M("el-dialog");return at(),bt(r,{title:"SSL\u8BC1\u4E66",modelValue:i.dialogVisible,"onUpdate:modelValue":k[0]||(k[0]=l=>i.dialogVisible=l),width:"800px",center:"",top:"20px","append-to-body":"",onClose:i.handleDialogClose},{default:H(()=>[i.dialogVisible?(at(),bt(a,{key:0,row:n.row,onOnCancel:i.handleClose,onOnSuccess:i.handleSuccess},null,8,["row","onOnCancel","onOnSuccess"])):Dt("",!0)]),_:1},8,["modelValue","onClose"])}const mr=mt(fr,[["render",pr]]),_r={name:"",components:{DataFormDialog:Mt,ConnectStatus:$t,ExpireProgress:te,CertificateDetailDialog:mr},props:{list:{type:Array}},emits:["on-close","on-success","selection-change"],computed:{},data(){return{currentRow:null,dialogVisible:!1,CertificateDetailDialogVisible:!1}},methods:{handleEditRow(x){this.currentRow=x,this.dialogVisible=!0},handleOpenDetail(x){this.currentRow=x,this.CertificateDetailDialogVisible=!0},async handleDeleteClick(x){let k={issue_certificate_id:x.id};const n=await this.$http.deleteCertificateById(k);n.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(n.msg)},async handleStatusChange(x){let k={id:x.id};const n=await this.$http.function(k);n.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(n.msg)},async handleRenewIssueCertificateById(x){let k=this.$loading({fullscreen:!0}),n={issue_certificate_id:x.id};const E=await this.$http.renewIssueCertificateById(n);E.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(E.msg),this.$nextTick(()=>{k.close()})},handleUpdateSuccess(){this.$emit("on-success")}},created(){}},gr={style:{"margin-left":"4px"}};function yr(x,k,n,E,d,i){const a=M("el-table-column"),r=M("ExpireProgress"),l=M("ConnectStatus"),m=M("el-link"),y=M("Tickets"),g=M("el-icon"),b=M("Refresh"),o=M("el-popconfirm"),_=M("Delete"),s=M("el-table"),f=M("DataFormDialog"),c=M("CertificateDetailDialog");return at(),ft("div",null,[F(s,{data:n.list,stripe:"",border:"",onSelectionChange:k[0]||(k[0]=h=>x.$emit("selection-change",h))},{default:H(()=>[F(a,{type:"selection","header-align":"center",align:"center",width:"40"}),F(a,{label:"\u57DF\u540D","header-align":"center",align:"center",prop:"domains"},{default:H(h=>[(at(!0),ft(Vt,null,Lt(h.row.domains,v=>(at(),ft("div",null,gt(v),1))),256))]),_:1}),F(a,{label:"SSL\u7B7E\u53D1\u65F6\u95F4","header-align":"center",align:"center",prop:"start_time",width:"170"},{default:H(h=>[lt("span",null,gt(h.row.start_time||"-"),1)]),_:1}),F(a,{label:"SSL\u8FC7\u671F\u65F6\u95F4","header-align":"center",align:"center",prop:"expire_time",width:"170"},{default:H(h=>[lt("span",null,gt(h.row.expire_time||"-"),1)]),_:1}),F(a,{label:"\u8BC1\u4E66\u5929\u6570","header-align":"center",align:"center",width:"110",sortable:"custom",prop:"expire_days"},{default:H(h=>[F(r,{startTime:h.row.start_time,endTime:h.row.expire_time},null,8,["startTime","endTime"])]),_:1}),F(a,{label:"\u72B6\u6001","header-align":"center",align:"center",prop:"status",width:"90"},{default:H(h=>[F(l,{value:h.row.show_status,onOnClick:v=>i.handleEditRow(h.row)},null,8,["value","onOnClick"]),F(m,{underline:!1,type:"primary",onClick:v=>i.handleEditRow(h.row)},{default:H(()=>[lt("span",gr,gt(h.row.status_label||"-"),1)]),_:2},1032,["onClick"])]),_:1}),F(a,{label:"\u66F4\u65B0\u65F6\u95F4","header-align":"center",align:"center",width:"170",prop:"update_time_label"},{default:H(h=>[lt("span",null,gt(h.row.update_time_label||"-"),1)]),_:1}),F(a,{label:"\u81EA\u52A8\u7EED\u671F",width:"80","header-align":"center",align:"center"},{default:H(h=>[yt(gt(h.row.is_auto_renew?"\u662F":"\u5426"),1)]),_:1}),F(a,{label:"\u67E5\u770B",width:"60","header-align":"center",align:"center"},{default:H(h=>[F(m,{underline:!1,type:"primary",disabled:!h.row.has_ssl_certificate,onClick:v=>i.handleOpenDetail(h.row)},{default:H(()=>[F(g,null,{default:H(()=>[F(y)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:1}),F(a,{label:"\u7EED\u671F",width:"60",align:"center",prop:"tag"},{default:H(h=>[F(o,{title:"\u786E\u5B9A\u7EED\u671F\uFF1F",onConfirm:v=>i.handleRenewIssueCertificateById(h.row)},{reference:H(()=>[F(m,{underline:!1,type:"primary",disabled:!h.row.is_auto_renew},{default:H(()=>[F(g,null,{default:H(()=>[F(b)]),_:1})]),_:2},1032,["disabled"])]),_:2},1032,["onConfirm"])]),_:1}),F(a,{label:"\u5220\u9664",width:"60",align:"center",prop:"tag"},{default:H(h=>[F(o,{title:"\u786E\u5B9A\u5220\u9664\uFF1F",onConfirm:v=>i.handleDeleteClick(h.row)},{reference:H(()=>[F(m,{underline:!1,type:"danger"},{default:H(()=>[F(g,null,{default:H(()=>[F(_)]),_:1})]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),F(f,{visible:d.dialogVisible,"onUpdate:visible":k[1]||(k[1]=h=>d.dialogVisible=h),row:d.currentRow,defaultActiveStep:1,onOnSuccess:i.handleUpdateSuccess,onOnClose:k[2]||(k[2]=h=>x.$emit("on-close"))},null,8,["visible","row","onOnSuccess"]),F(c,{visible:d.CertificateDetailDialogVisible,"onUpdate:visible":k[3]||(k[3]=h=>d.CertificateDetailDialogVisible=h),row:d.currentRow},null,8,["visible","row"])])}const br=mt(_r,[["render",yr]]),wr={name:"issue-certificate-list",props:{},components:{DataFormDialog:Mt,DataTable:br},data(){return{list:[],total:0,page:1,size:20,keyword:"",selectedRows:[],loading:!0,dialogVisible:!1}},computed:{showBatchDeleteButton(){return!!(this.selectedRows&&this.selectedRows.length>0)}},methods:{resetData(){this.page=1,this.getData()},async getData(){this.loading=!0;let x={page:this.page,size:this.size,keyword:this.keyword};try{const k=await this.$http.getCertificateList(x);k.code==0&&(this.list=k.data.list.map(n=>(n.status=="pending"?(n.show_status=null,n.status_label="\u672A\u9A8C\u8BC1"):n.status=="valid"?(n.show_status=!0,n.status_label="\u5DF2\u9A8C\u8BC1"):(n.show_status=!1,n.status_label="\u672A\u77E5"),n)),this.total=k.data.total)}catch(k){console.log(k)}finally{this.loading=!1}},handleAddRow(){this.dialogVisible=!0},handleAddSuccess(){this.resetData()},handleSearch(){this.resetData()},handleSelectionChange(x){this.selectedRows=x},async handleBatchDeleteConfirm(){let x=this.$loading({fullscreen:!0}),k={ids:this.selectedRows.map(n=>n.id)};try{const n=await this.$http.deleteCertificateByBatch(k);n.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.resetData()):this.$msg.error(n.msg)}catch(n){console.log(n)}finally{this.$nextTick(()=>{x.close()})}},async handleRefreshRow(x){let k={issue_certificate_id:x.id};const n=await this.$http.getIssueCertificateById(k);if(n.ok){let E=this.list.findIndex(d=>d.id==x.id);this.list.splice(E,1,n.data)}}},created(){this.getData()}},vr={class:"app-container"},kr={class:"flex justify-between margin-bottom--20"},Sr={class:"flex justify-between mt-sm items-center"},xr={style:{"font-size":"14px",color:"#333333","line-height":"24px"}};function Cr(x,k,n,E,d,i){const a=M("Plus"),r=M("el-icon"),l=M("el-button"),m=M("Search"),y=M("el-input"),g=M("Delete"),b=M("el-link"),o=M("el-popconfirm"),_=M("DataTable"),s=M("el-pagination"),f=M("DataFormDialog"),c=Yt("loading");return at(),ft("div",vr,[lt("div",kr,[F(l,{type:"primary",onClick:i.handleAddRow},{default:H(()=>[F(r,null,{default:H(()=>[F(a)]),_:1}),yt("\u7533\u8BF7")]),_:1},8,["onClick"]),F(y,{class:"ml-sm",style:{width:"260px"},modelValue:d.keyword,"onUpdate:modelValue":k[0]||(k[0]=h=>d.keyword=h),placeholder:"\u8F93\u5165\u57DF\u540D",clearable:"",onKeypress:Xt(i.handleSearch,["enter"]),onClear:i.handleSearch},{append:H(()=>[F(l,{onClick:i.handleSearch},{default:H(()=>[F(r,null,{default:H(()=>[F(m)]),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeypress","onClear"])]),lt("div",Sr,[lt("div",xr," \u5171\u8BA1 "+gt(d.total)+" \u6761\u6570\u636E ",1),lt("div",null,[i.showBatchDeleteButton?(at(),bt(o,{key:0,title:"\u786E\u5B9A\u5220\u9664\u9009\u4E2D\uFF1F",onConfirm:i.handleBatchDeleteConfirm},{reference:H(()=>[F(b,{underline:!1,type:"danger",class:"mr-sm"},{default:H(()=>[F(r,null,{default:H(()=>[F(g)]),_:1}),yt("\u6279\u91CF\u5220\u9664")]),_:1})]),_:1},8,["onConfirm"])):Dt("",!0)])]),Jt(F(_,{class:"mt-sm",list:d.list,onOnSuccess:i.resetData,onOnClose:i.resetData,onOnEditRow:x.handleEditRow,onSelectionChange:i.handleSelectionChange,onOnRefreshRow:i.handleRefreshRow},null,8,["list","onOnSuccess","onOnClose","onOnEditRow","onSelectionChange","onOnRefreshRow"]),[[c,d.loading]]),F(s,{class:"mt-md justify-center",background:"",layout:"total, prev, pager, next",total:d.total,"page-size":d.size,"onUpdate:pageSize":k[1]||(k[1]=h=>d.size=h),"current-page":d.page,"onUpdate:currentPage":k[2]||(k[2]=h=>d.page=h),onCurrentChange:i.getData},null,8,["total","page-size","current-page","onCurrentChange"]),F(f,{visible:d.dialogVisible,"onUpdate:visible":k[3]||(k[3]=h=>d.dialogVisible=h),onOnSuccess:i.handleAddSuccess,onOnClose:i.resetData},null,8,["visible","onOnSuccess","onOnClose"])])}const Tr=mt(wr,[["render",Cr]]);export{Tr as default};
